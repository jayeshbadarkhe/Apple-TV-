/*! For license information please see chunk.450.7912d97999bc95fdbf2d.js.LICENSE.txt */
(self.webpackChunk_ember_auto_import_=self.webpackChunk_ember_auto_import_||[]).push([[450],{763:function(e,t,n){"use strict"
n.r(t),n.d(t,{KNOWN_CAMPAIGN_AND_AFFILIATE_QUERY_PARAMS:function(){return r},KNOWN_MARKETING_QUERY_PARAMS:function(){return i},METRICS_REGISTER_ENDPOINT:function(){return a},MUSIC_AFFILIATIONS_ENDPOINT:function(){return u},PROCESS_REDIRECT_URL_ENDPOINT:function(){return o},TV_AFFILIATIONS_ENDPOINT:function(){return s},default:function(){return f},handleCampaignAndAffiliateUrls:function(){return d}})
var r=["affC","adId","advp","at","ct","itsct","itscg","itscc","itcCt","its_qt","ls","partnerId","pt","qtkid","uo"],i=["mttn3pid","mttnagencyid","mttncc","mttnmyad","mttnmyadg","mttnmycmp","mttnmykw","mttnmypla","mttnmypub","mttnmysite","mttnpid","mttnrefid","mttnsiteid","mttnsub1","mttnsub2","mttnsub3","mttnsubad","mttnsubadgp","mttnsubcmp","mttnsubkw","mttnsubpid","mttnsubplmnt","mttnsubsite","gclid"],o="https://itunes.apple.com/WebObjects/MZStoreServices.woa/wa/processRedirectUrl",a="https://xp.apple.com/register",s="https://buy.tv.apple.com/account/v1/affiliation/association",u="https://buy.music.apple.com/account/v1/affiliation/association"
function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){if(t&&"object"===c(t))for(var n in t)t[n]&&e.setRequestHeader(n,t[n])}function h(e,t){return new Promise((function(n,r){e.onload=function(){e.status<200||e.status>=300?r({request:e}):n(e)},e.onerror=function(){r({request:e})},t?e.send(t):e.send()}))}function d(e,t){var n=t||{}
if(!function(e,t){var n=(e.indexOf("?")>-1?e.split("?")[1]:e).split("&"),r=t
if(r||(r=[]),e&&""!==e.trim())for(var i=0;i<n.length;i++){var o=n[i].split("="),a=o[0],s=o[1]
if(r.indexOf(a)>-1)return"at"!==a||!!s.match(/^[a-zA-Z0-9]+$/)}return!1}(e,r))return Promise.reject("No campaign or affiliate query params found")
var i,s=n.endpoint||o
return(i=new XMLHttpRequest,i.open("GET",a),i.withCredentials=!0,h(i)).then((function(){return function(e,t,n){var r;(r=n.customXhr?n.customXhr:"undefined"!=typeof itms?itms.makeStoreXMLHttpRequest():new XMLHttpRequest).open("POST",t),r.withCredentials=!0,l(r,{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}),l(r,n.headers)
var i="url="+encodeURIComponent(e)
return n.ignoreMarketing&&(i+="&ignoreMarketing=true"),h(r,i).then((function(e){var t=e.response
if(200===e.status&&""!==t){var n=JSON.parse(t)
return n.setCookies&&n.setCookies.forEach((function(e){document.cookie=function(e){return Object.keys(e).reduce((function(t,n){return["name","value"].includes(n)?t:"".concat(t,";").concat(n,"=").concat(e[n])}),"".concat(e.name,"=").concat(e.value))}(e)})),n.redirectUrl}}))}(e,s,n)}))}var f=d},758:function(e,t){var n,r,i,o
function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}o=function(e){"use strict"
function t(e){return(t="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)})(e)}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e)
if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e)
t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{}
t%2?r(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return c(e,t)
var n=Object.prototype.toString.call(e).slice(8,-1)
return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length)
for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n]
return r}function l(e,t,n,r,i){return{path:e,expectsFullscreenLayout:t,expectsModalLayout:n,uniqueQueryParams:3<arguments.length&&void 0!==r?r:[],fragment:4<arguments.length&&void 0!==i?i:""}}function h(e,t){var n=1<arguments.length&&void 0!==t?t:"",r="undefined"!=typeof window&&window.location||{}
return e.replace("$<mediaDomain>",n||function(e){var t=e.match(V)
return t&&t[1]}(r.origin)).replace("$<protocol>",r.protocol)}function d(e){var t=e||""
return 0!==t.indexOf("/")&&(t="/".concat(t)),t.lastIndexOf("/")===t.length-1&&(t=t.slice(0,t.length-1)),t}function f(e,t){return{createIframe:function(r,o){if(!r)return null
var a=(1<arguments.length&&void 0!==o?o:{}).queryParams,u=void 0===a?{}:a,c=function(e){var t=d(L[e]||e)
return N[t]||null}(r),l=document.createElement("iframe")
u.isFullscreen&&!c.expectsFullscreenLayout||u.isModal&&c.expectsModalLayout
var f=t[O].store.value,p=t[R].store.value
return l.src=function(e,t){var n=1<arguments.length&&void 0!==t?t:{},r=n.product,o=void 0===r?"":r,a=n.queryParamInterceptor,u=n.queryParamsForEncoding,c=void 0===u?{}:u,l=n.queryParams,d=void 0===l?{}:l,f=o&&h(z,o)||W,p=i(i(i({},function(e){var t=e.expectsFullscreenLayout,n=e.expectsModalLayout
return t&&n?{}:t?{isFullscreen:!0}:n?{isModal:!0}:{}}(e)),d),c),v=s(new Set([].concat(s(q),s(e.uniqueQueryParams),s(Object.keys(p))))).map((function(e){var t={key:e,value:c[e]?encodeURIComponent(p[e]):p[e]}
return a&&a(i({},t))||t})).filter((function(e){return e&&void 0!==e.value})).reduce((function(e,t,n){var r=0===n?"?":"&",i="".concat(t.key,"=").concat(t.value)
return"".concat(e).concat(r).concat(i)}),"")
return"".concat(f).concat(e.path).concat(v)}(c,i({queryParamInterceptor:t[j].store.value,queryParamsForEncoding:i(i({},f&&n({},O,f)),p&&n({},R,p)),queryParams:i(i({},u),{},{product:e})},!1)),l.setAttribute("data-is-cm-managed",""),l}}}function p(e){return[e[K],e[G],e[B]]}function v(e){return[D.includes(e),F.includes(e)]}function y(){return Array.prototype.slice.call(document.querySelectorAll("iframe[data-is-cm-managed]")).map((function(e){return e.contentWindow}))}function m(e,t){return{whoOverride:1<arguments.length&&void 0!==t?t:null,messageSendContext:e[P].store.value}}function g(e,t,r){var i,o=2<arguments.length&&void 0!==r?r:null
return n(i={},B,e),n(i,K,t),n(i,G,o),i}function b(e,t,n){var r=2<arguments.length&&void 0!==n?n:{},i=r.messageSendContext,a=r.whoOverride,s=o(v(t),1)[0],u=a?Array.isArray(a)?a:[a]:function(e){switch(e){case C:return window.parent!==window?[window.parent]:[]
case T:var t=y()
return 0<t.length?[t[0]]:null
case A:return y()
case M:return[window]
default:return null}}(i)
if(u&&0!==u.length){var c=o(p(e),3)
c[0],c[1],c[2],u.forEach((function(t){var n=h(s?z:"$<protocol>//$<mediaDomain>.apple.com")
t.postMessage(e,n)}))}}function w(e,t){function n(e){var t=e.data,n=t[K],r=t[B]
return!(!n||!r)}function r(e){var t=e.data[K],n=f?H:J
return Object.values(n).includes(t)||s(t)}function i(e){return f&&function(e){return U.test(e)}(e.origin)||y&&function(e){return V.test(e)}(e.origin)}var a=function(e,t){function n(e){return Object.values(Z).includes(e)}function r(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o]
var a=r[2]
i.push.apply(i,r),function(e,t,n){b(g(e,Q),e,m(t,n))}(e,t,a)}var i=function(e,t){function n(){window.clearTimeout(i),i=null}function r(e){e.queue=[]}var i,o={queue:[],flush:function(){n(),o.queue.forEach((function(n){var r=n.eventName,i=n.data,o={whoOverride:n.whoOverride,messageSendContext:t[P].store.value}
b(g(e,r,i),e,o)})),r(o)},push:function(e,t,a){o.queue.push({eventName:e,data:t,whoOverride:a}),function(e){var t=0<arguments.length&&void 0!==e?e:function(){}
i=i||window.setTimeout((function(){t(),n()}),8e3)}((function(){r(o)}))}}
return o}(e,t),a=o(v(e),1)[0]
return{interceptMessageReceive:function(n){return a?function(e){var t=o(p(e.data),1)[0]
t!==X&&t!==Y||window.setTimeout((function(){i.flush()}),0)}(n):function(n){var r=o(p(n.data),3),i=r[0],a=r[2]
i===Q&&function(e,t,n){b(g(e,Y),e,m(t,n))}(e,t,a)}(n)},interceptMessageSend:function(){return a?r.apply(void 0,arguments):function(){}.apply(void 0,arguments)},isInternalMessage:n,shouldInterceptMessageSend:function(e){return a||n(e)},shouldInterceptMessageReceive:function(e){return n(e)}}}(e,t),s=a.isInternalMessage,u=a.shouldInterceptMessageSend,c=a.shouldInterceptMessageReceive,l=a.interceptMessageSend,h=a.interceptMessageReceive,d=o(v(e),2),f=d[0],y=d[1]
return{RECEIVE_EVENTS:f?H:J,SEND_EVENTS:f?J:H,send:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i]
var o=r[0],a=r[1],s=r[2]
u(o)?l.apply(void 0,r):b(g(e,o,a),e,m(t,s))},listen:function(){if("undefined"!=typeof window){var a=function(a){if(function(e){for(var t=[n,i,r],o=0,a=t.length;o<a;o++)if(!(0,t[o])(e))return!1
return!0}(a)){var s=o(p(a.data),3),u=s[0],l=s[1]
s[2],c(u)?h(a):t[E]&&t[E].store.value(u,l,e)}}
window.addEventListener("message",a),ee=a,f||t[P].store.value===I||b(g(e,f?$:X),e,m(t))}},stopListening:function(){ee&&window.removeEventListener("message",ee)}}}function _(){function e(e){return N[d(e)]}return{MAXIMUM_PATH_LEVEL:function(){var e=Object.keys(N),t=0
return e.forEach((function(e){var n=e.split("/").filter((function(e){return!!e}))
n.length>t&&(t=n.length)})),t}(),ROUTE_NAME_TO_PATH:L,SUPPORTED_ROUTES:N,getCommerceRoute:e,isCommerceRoute:function(t){return!!e(t)}}}function k(e,n){Object.keys(n).forEach((function(r){var i=Object.getOwnPropertyDescriptor(e,r)
i&&!i.configurable||function(e,n){Object.defineProperty(e,n.name,{set:function(e){var r=n.allowedValues,i=n.defaultValue,o=n.isRequired,a=n.type
r&&0<r.length&&!r.includes(e)||o&&void 0===e||t(e)===a.toLowerCase()&&(n.store.value=e||i)},get:function(){return n.store.value}})}(e,n[r])}))}var S,O="devToken",E="onMessageReceived",R="productVersion",j="queryParamInterceptor",P="messageSendContext",A="allIframes",I="explicit",T="firstIframe",C="parentWindow",M="self",x=(n(S={},O,i(i({},{type:"",name:"",isRequired:!1,defaultValue:null,allowedValues:[],store:{value:void 0}}),{},{type:"String",name:O,defaultValue:""})),n(S,R,i(i({},{type:"",name:"",isRequired:!1,defaultValue:null,allowedValues:[],store:{value:void 0}}),{},{type:"String",name:R,defaultValue:function(){if("undefined"==typeof document||!document.querySelector)return""
var e=document.querySelector("meta[name=version]")
return e&&e.content||""}()})),n(S,E,i(i({},{type:"",name:"",isRequired:!1,defaultValue:null,allowedValues:[],store:{value:void 0}}),{},{type:"Function",name:E,defaultValue:function(){}})),n(S,j,i(i({},{type:"",name:"",isRequired:!1,defaultValue:null,allowedValues:[],store:{value:void 0}}),{},{type:"Function",name:j,defaultValue:function(){}})),n(S,P,i(i({},{type:"",name:"",isRequired:!1,defaultValue:null,allowedValues:[],store:{value:void 0}}),{},{type:"String",name:P,allowedValues:[A,I,T,C,M],defaultValue:I})),S),D=["music","tv","xyzw"],F=["commerce-app"],L={"age-verification":"/account/verification",authenticate:"/authenticate","carrier-linking":"/account/carrier-linking","content-restricted":"/content-restricted","create-account":"/account/create","device-link":"/device-link","edit-billing":"/account/edit-billing",gdpr:"/account/privacy","korea-age-verification":"/age-verification/landing",logout:"/logout","parental-controls":"/account/settings#parental-controls","plan-cancel":"/plan/cancel","plan-reactivate":"/plan/reactivate","plan-subscribe":"/plan/subscribe",privacy:"/account/privacy",redeem:"/redeem",settings:"/account/settings",subscribe:"/subscribe","subscribe-carrier":"/subscribe/carrier",terms:"/terms-agreement","verify-payment":"/verify-payment"},N={"/account/verification":l("/account/verification",!1,!0,["type"]),"/authenticate":l("/authenticate",!1,!0),"/account/carrier-linking":l("/account/carrier-linking",!1,!0),"/content-restricted":l("/content-restricted",!1,!0,["contentType"]),"/account/create":l("/account/create",!1,!0),"/device-link":l("/device-link",!1,!0,["code"]),"/account/edit-billing":l("/edit-billing",!1,!0),"/account/privacy":l("/account/privacy",!1,!0,[]),"/age-verification/landing":l("/age-verification/landing",!1,!0,["expirationDate"]),"/logout":l("/logout",!1,!0),"/account/settings#parental-controls":l("/account/settings",!0,!1,"#parental-controls"),"/plan/cancel":l("/plan/cancel",!1,!0,["id"]),"/plan/reactivate":l("/plan/reactivate",!1,!0,["id"]),"/plan/subscribe":l("/plan/subscribe",!1,!0,["id"]),"/redeem":l("/redeem",!1,!0,["code"]),"/account/settings":l("/account/settings",!0,!1),"/subscribe":l("/subscribe",!1,!0,["type"]),"/subscribe/carrier":l("/subscribe/carrier",!1,!0,["adamId","productId"]),"/terms-agreement":l("/terms-agreement",!1,!0,["type"]),"/verify-payment":l("/verify-payment",!1,!0,["verifyPaymentId","deviceCode"])},q=["product","isFullscreen","isModal","locale","iso2code"],V=/:\/\/(.*)\.apple\.com/,U=/:\/\/(.*)\.apple\.com/,W="/includes/commerce",z="$<protocol>//$<mediaDomain>.apple.com".concat(W),K="__cm_event",B="__cm_consuming-product",G="__cm_data",H=Object.freeze({AGE_VERIFICATION_FLOW_COMPLETE:"ageverificationflowcomplete",DID_AGE_VERIFY:"ageverified",DID_GDPR_ACKNOWLEDGE:"gdpracknowledged",DID_INITIALIZE:"initialized",DID_SIGN_IN:"signedin",DID_SIGN_OUT:"signedout",DID_CLOSE:"closed",DID_TRANSITION:"transitioned",SUBSCRIPTION_DID_CHANGE:"subscriptionchanged",REQUIRES_TRANSITION:"requirestransition",REQUIRES_CONTEXTUAL_UPSELL:"requirescontextualupselldata",REQUIRES_KOREA_AGE_VERIFICATION:"requireskoreaageverificationdata"}),J=Object.freeze({CONTEXTUAL_UPSELL:"contextualupselldata",KOREA_AGE_VERIFICATION:"koreaageverificationdata"}),$="__cm_initialized_host",X="__cm_initialized_hosted",Q="__cm_will_send_if_ready",Y="__cm_ready_for_message",Z={__CM_INITIALIZED_HOST:$,__CM_INITIALIZED_HOSTED:X,__CM_WILL_SEND_IF_READY:Q,__CM_READY_FOR_MESSAGE:Y},ee=null,te=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}
e.getCommerceManager=function(){return te},e.setupCommerceManager=function(e,t){var r=1<arguments.length&&void 0!==t?t:{},o="string"==typeof e&&e.toLowerCase(),a=D.includes(o),s=F.includes(o)
if(!a&&!s)throw new Error("Product not supported")
k(te,x),function(e,t){Object.keys(t).forEach((function(n){var r=t[n],i=r.isRequired,o=r.defaultValue
i||(e[n]=o)}))}(te,x),Object.assign(te,i({},r))
var u=function(e,t){return Object.keys(e).reduce((function(r,o){var a=e[o][t]
return void 0!==a?i(i({},r),{},n({},o,n({},t,a))):r}),{})}(x,"store"),c=f(e,u),l=w(e,u),h=_()
return r.onMessageReceived&&(l.stopListening(),l.listen()),Object.assign(te,i(i(i(i({},c),h),l),{},{version:"1.2.5",PRODUCT_PROVIDED_PROPS_METADATA:x}))},Object.defineProperty(e,"__esModule",{value:!0})},"object"==a(t)?o(t):(r=[t],void 0===(i="function"==typeof(n=o)?n.apply(t,r):n)||(e.exports=i))},112:function(e,t){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.removeCookie=t.setCookie=t.getCookie=t.GenericStorage=void 0
var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
n(this,e),this.data=t}var t
return(t=[{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"length",get:function(){return this.keys.length}},{key:"keys",get:function(){return Object.keys(this.data)}},{key:"getItem",value:function(e){return this.data[e]||null}},{key:"setItem",value:function(e,t){this.data[e]=t}},{key:"removeItem",value:function(e){delete this.data[e]}},{key:"clear",value:function(){var e=this
this.keys.forEach((function(t){return e.removeItem(t)}))}},{key:"key",value:function(e){return this.keys[e]||null}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}()
function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:14,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=new Date
i=null!=i?i:window
var s=(o=null!=o?o:/\./.test(i.location.hostname)?i.location.hostname:"").length>0?"domain=".concat(o,"; "):""
a.setTime(a.getTime()+24*r*60*60*1e3)
var u=""
"https:"===i.location.protocol&&(u="; secure"),i.document.cookie="".concat(e,"=").concat(t,"; expires=").concat(a.toUTCString(),"; ").concat(s,"path=").concat(n).concat(u)}t.GenericStorage=r,t.getCookie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.cookie,n=t.match(new RegExp("(?:^|;\\s*)".concat(e,"=([^;]*)")))
if(n)return n[1]},t.setCookie=i,t.removeCookie=function(e,t,n){i(e,"","/",0,t,n)}},492:function(e,t,n){"use strict"
function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return a(e,t)
var n=Object.prototype.toString.call(e).slice(8,-1)
return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length)
for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n]
return r}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
if(Reflect.construct.sham)return!1
if("function"==typeof Proxy)return!0
try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()
return function(){var n,r=h(e)
if(t){var i=h(this).constructor
n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments)
return l(this,n)}}function l(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(e,t){var n={}
for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r])
if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0
for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function m(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t
e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}n.r(t),n.d(t,{API:function(){return Xe},InvalidationEvent:function(){return Ne},UTS_BASE_URL:function(){return Ve},UTS_CALLER:function(){return Ke},UTS_CONFIG_PATH:function(){return We},UTS_DECORATE_PATH:function(){return ze},UTS_INIT_CONFIG_PATH:function(){return Ue},UTS_SF:function(){return Ge},UTS_SFH:function(){return He},UTS_VERSION:function(){return Be},V3_ROUTES:function(){return Je},VERSION:function(){return qe}})
var g="undefined"!=typeof FastBoot?FastBoot.require("buffer").Buffer:"undefined"!=typeof process&&null!==process.versions&&null!==process.versions.node?Buffer:window.Buffer
function b(e){return function(){for(var t="",n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i]
for(var o=r.length;o--;){var a=r[o]
t+=a===Object(a)?JSON.stringify(a):a,e._memoized||(e._memoized={})}return t in e._memoized?e._memoized[t]:e._memoized[t]=e.apply(void 0,r)}}function w(e){var t=function(e){return null!=e}
return 0===arguments.length&&"undefined"!=typeof process&&(e=process),t(e)&&t(e.versions)&&t(e.versions.node)||"undefined"!=typeof FastBoot}var _=b(w()?function(e){return g.from(e,"base64").toString("binary")}:function(e){return window.atob(e)})
function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]
return Array.isArray(e)?e:[e]}function S(e,t){return t.split(".").reduce((function(e,t){if(void 0!==e)return e[t]}),e)}function O(e,t,n){return t.split(".").reduce((function(t,r,i,o){var a=i===o.length-1,s=t.hasOwnProperty(r),u=t[r]instanceof Object,c=null===t[r]
if(!a&&s&&(!u||c))throw new TypeError("Value at ".concat(o.slice(0,i+1).join(".")," in keypath is not an Object."))
return a?(t[r]=n,e):s?t[r]:t[r]={}}),e)}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]
return n&&(e=Object.keys(e).reduce((function(t,n){return t[e[n]]=n,t}),{})),Object.keys(e).reduce((function(n,r){var i,o=e[r]
return(i="function"==typeof o?o():S(t,o))&&O(n,r,i),n}),{})}b(w()?function(e){return g.from(e).toString("base64")}:function(e){return window.btoa(e)})
var R,j=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0
d(this,e),this._eventRegistry={},n.forEach((function(e){t._eventRegistry[e]=[]})),r&&r.namespace&&(this.dispatchNamespace="com.apple.".concat(r.namespace)),this.shouldStorageDispatch&&(this._handleGlobalStorageEvent=this._handleGlobalStorageEvent.bind(this),window.addEventListener("storage",this._handleGlobalStorageEvent))}return p(e,[{key:"shouldStorageDispatch",get:function(){return"undefined"!=typeof window&&"undefined"!=typeof sessionStorage&&this.dispatchNamespace}},{key:"addEventListener",value:function(e,t){Array.isArray(this._eventRegistry[e])&&this._eventRegistry[e].push(t)}},{key:"dispatchEvent",value:function(e,t){Array.isArray(this._eventRegistry[e])&&this._eventRegistry[e].forEach((function(e){return e(t)}))}},{key:"dispatchDistributedEvent",value:function(e,t){if(this.dispatchEvent(e,t),this.shouldStorageDispatch){var n="".concat(this.dispatchNamespace,":").concat(e)
sessionStorage.setItem(n,JSON.stringify(t))}}},{key:"removeEventListener",value:function(e,t){if(Array.isArray(this._eventRegistry[e])){var n=this._eventRegistry[e].indexOf(t)
this._eventRegistry[e].splice(n,1)}}},{key:"_handleGlobalStorageEvent",value:function(e){var t
if(this.dispatchNamespace&&(null===(t=e.key)||void 0===t?void 0:t.startsWith("".concat(this.dispatchNamespace,":")))){var n=e.key.substring(this.dispatchNamespace.length+1)
this.dispatchEvent(n,JSON.parse(e.newValue))}}}]),e}(),P=function(e){return function(e){return!!e&&"object"===v(e)}(e)&&!function(e){var t=Object.prototype.toString.call(e)
return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===A}(e)}(e)},A="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103
function I(e,t){return!1!==t.clone&&t.isMergeableObject(e)?M((n=e,Array.isArray(n)?[]:{}),e,t):e
var n}function T(e,t,n){return e.concat(t).map((function(e){return I(e,n)}))}function C(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function M(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||T,n.isMergeableObject=n.isMergeableObject||P
var r=Array.isArray(t)
return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={}
return n.isMergeableObject(e)&&C(e).forEach((function(t){r[t]=I(e[t],n)})),C(t).forEach((function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=function(e,t){if(!t.customMerge)return M
var n=t.customMerge(e)
return"function"==typeof n?n:M}(i,n)(e[i],t[i],n):r[i]=I(t[i],n)})),r}(e,t,n):I(t,n)}M.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array")
return e.reduce((function(e,n){return M(e,n,t)}),{})},function(e){e.dataRecordDidDelete="dataRecordDidDelete",e.dataRecordWillDelete="dataRecordWillDelete",e.dataRecordDidMaterialize="dataRecordDidMaterialize",e.dataRecordDidPopulate="dataRecordDidPopulate",e.dataRecordWillPopulate="dataRecordWillPopulate"}(R||(R={}))
var x=function(e){return!(!e||"function"!=typeof e.hasAttributes||"function"!=typeof e.hasRelationships||"function"!=typeof e.hasViews||"function"!=typeof e.serialize)},D=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}
d(this,e),this.type=t,this.id=n,this._mjs={attributes:[],relationships:[],views:[]},this._meta={},this._mjs=Object.assign(Object.assign({},this._mjs),r)}return p(e,[{key:"hasProperties",value:function(e){return!e||(e.attributes||e.relationships||e.views?!(e.attributes&&!this.hasAttributes(e.attributes)||e.relationships&&!this.hasRelationships(e.relationships)||e.views&&!this.hasViews(e.views)):this.hasAttributes()||this.hasRelationships()||this.hasViews())}},{key:"hasAttributes",value:function(e){return this._hasProperties(this._mjs.attributes,e)}},{key:"hasRelationships",value:function(e){return this._hasProperties(this._mjs.relationships,e)}},{key:"hasViews",value:function(e){return this._hasProperties(this._mjs.views,e)}},{key:"meta",value:function(e){return e?this._meta[e]:this._meta}},{key:"serialize",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={id:this.id,type:this.type}
return n["".concat(this.type,"-").concat(this.id)]&&!r.allowFullDuplicateSerializations?i:(n["".concat(this.type,"-").concat(this.id)]=!0,this.hasAttributes()&&(i.attributes=this._mjs.attributes.reduce((function(t,n){return t[n]=e[n],t}),{})),this._mjs.relationships.length>0&&(i.relationships=this._serializeRelatedData(this._mjs.relationships,n,r)),this._mjs.views.length>0&&(i.views=this._serializeRelatedData(this._mjs.views,n,r)),t?{data:i}:i)}},{key:"setProperty",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"attributes",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}
function o(e,t,n){return t}function a(t){return!(!t||"object"!==v(t)||t instanceof e)}this.hasOwnProperty(t)||(this._mjs[r]||(this._mjs[r]=[]),this._mjs[r].push(t))
var s=function(e){return{value:e,writable:!0,configurable:!0,enumerable:!0}}
this[t]&&n&&"object"===v(this[t])&&"object"===v(n)?"attributes"===r?Object.defineProperty(this,t,s(M(this[t],n,{arrayMerge:o,isMergeableObject:a}))):"relationships"===r&&Array.isArray(this[t])&&i.extendRelationships?Object.defineProperty(this,t,s(M(this[t],n,{isMergeableObject:a}))):Object.defineProperty(this,t,s(n)):Object.defineProperty(this,t,s(n))}},{key:"removeRelative",value:function(e,t){this[e]&&(Array.isArray(this[e])?this[e]=this[e].filter((function(e){return e.id!==t})):delete this[e])}},{key:"setParent",value:function(e){var t=this._mjs.parents,n=t&&t.length>0
this._mjs.parents=n?t.concat(e):e}},{key:"_hasProperties",value:function(e,t){return!!e&&(t?k(t).every((function(t){return e.includes(t)})):e.length>0)}},{key:"_serializeRelatedData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}
return e.reduce((function(e,i){if(r.excludeRelationships&&r.excludeRelationships.has(i))return e
if(r.includeRelationships&&!r.includeRelationships.has(i))return e
var o=t[i]
return Array.isArray(o)?e[i]={data:o.map((function(e){return"function"==typeof e.serialize?e.serialize(!1,n,r):e}))}:e[i]=o&&"function"==typeof o.serialize?o.serialize(!1,n,r):o,e}),{})}}]),e}(),F=function(e){s(n,e)
var t=c(n)
function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return d(this,n),(e=t.call(this,[R.dataRecordDidDelete,R.dataRecordWillDelete,R.dataRecordDidMaterialize,R.dataRecordWillPopulate,R.dataRecordDidPopulate]))._removeOnExpiration=!1,e._shouldDisableRecordReuse=!0,e._records={},e._expiryRecords=new Set,e._removeOnExpiration=!!r.removeOnExpiration,e._mapping=r.mapping,e._shouldDisableRecordReuse=!!r.shouldDisableRecordReuse,e.filter=r.filter,e}return p(n,[{key:"mapping",get:function(){return this._mapping},set:function(e){this._mapping=e}},{key:"clear",value:function(){this._records={},this._expiryRecords=new Set}},{key:"peek",value:function(e,t,n){var r=this
if(this._checkForExpiredRecords(),!this._records[e])return t?null:[]
if(!t)return Object.values(this._records[e])
if(Array.isArray(t))return t.map((function(t){var i=r._records[e][t]
if(i&&i.hasProperties(n))return i}))
var i=this._records[e][t]
return i&&i.hasProperties(n)?i:null}},{key:"populateDataRecords",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}
if(!e.data)return[]
if(!Array.isArray(e.data))return this.populateDataRecord(e.data,n,r)
var i=[]
return e.data.forEach((function(e,o){var a=Object.assign(Object.assign({},r),{parents:r.parents?[Object.assign(Object.assign({},r.parents[0]),{position:o})]:[]})
r.parents&&(r.parents[0].position=o)
var s=t.populateDataRecord(e,n,a)
i.push(s)})),i}},{key:"populateDataRecord",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=r.filter||this.filter,o=r.mapping||this.mapping
if(!i||i(e)){if(o){var a="function"==typeof o?o(e):E(o,e)
Object.assign(e,a)}this._shouldDisableRecordReuse&&(n={})
var s=this._materializeRecord(n,Object.assign({id:e.id,type:e.type},r))
return e.meta&&(s._meta=e.meta),e.attributes&&e.attributes.cachingPolicy&&e.attributes.cachingPolicy.maxAge&&(s._mjs.expiration=Date.now()+1e3*e.attributes.cachingPolicy.maxAge,this._removeOnExpiration&&this._expiryRecords.add(s)),this._populateDataAttributes(e,s),"object"===v(e.relationships)&&Object.keys(e.relationships).forEach((function(i){var a=e.relationships[i]
a&&"data"in a&&(a=t.populateDataRecords(a,n,{mapping:o,parents:[{relationshipName:i,parentType:s.type,parentId:s.id}]}),s.setProperty(i,a,"relationships",r))})),"object"===v(e.views)&&Object.keys(e.views).forEach((function(r){var i=e.views[r]
if(i.attributes||i.data){var a=new D("view",r)
if(t._populateDataAttributes(i,a),i.data){var u=t.populateDataRecords(i,n,o)
a.setProperty("data",u,"relationships")}s.setProperty(r,a,"views")}})),s}}},{key:"query",value:function(e,t){this._checkForExpiredRecords()
var n=function(e){return!1}
return"string"==typeof e&&t?n=function(n){return(null==n?void 0:n[e])===t}:"function"==typeof e?n=function(t){try{return e(t)}catch(e){return!1}}:"object"===v(e)&&(n=function(t){var n=Object.keys(e),r=0
return n.forEach((function(n){(null==t?void 0:t[n])===e[n]&&r++})),n.length===r}),Object.values(this._records).reduce((function(e,t){return Object.values(t).forEach((function(t){n(t)&&e.push(t)})),e}),[])}},{key:"remove",value:function(e,t){var n=this
if(setTimeout(this._checkForExpiredRecords.bind(this),0),this._records.hasOwnProperty(e)){var r=this.peek(e,t)
r&&(this.dispatchEvent(R.dataRecordWillDelete,[e,t]),r._mjs.parents&&r._mjs.parents.length>0&&r._mjs.parents.forEach((function(e){var t=e.relationshipName,i=e.parentType,o=e.parentId
n.peek(i,o).removeRelative(t,r.id)})),delete this._records[e][t],this.dispatchEvent(R.dataRecordDidDelete,[e,t]))}}},{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return setTimeout(this._checkForExpiredRecords.bind(this),0),this.populateDataRecords(e,this._records,t)}},{key:"_populateDataAttributes",value:function(e,t){"object"===v(e.attributes)&&(this.dispatchEvent(R.dataRecordWillPopulate,[t.type,t.id]),Object.keys(e.attributes).forEach((function(n){t.setProperty(n,e.attributes[n],"attributes")})),this.dispatchEvent(R.dataRecordDidPopulate,[t.type,t.id]))}},{key:"_materializeRecord",value:function(e,t){var n=t.type,r=t.id,i=y(t,["type","id"])
return e[n]=e[n]||{},e[n][r]?e[n][r].setParent(i.parents||[]):e[n][r]=new D(n,r,i),this.dispatchEvent(R.dataRecordDidMaterialize,[n,r]),e[n][r]}},{key:"_checkForExpiredRecords",value:function(){var e=this,t=[]
this._expiryRecords.forEach((function(n){Date.now()>n._mjs.expiration&&(t.push([n.type,n.id]),e._expiryRecords.delete(n))})),t.forEach((function(t){e.remove.apply(e,i(t))}))}}]),n}(j),L=function(){function e(t){if(d(this,e),this.token=t,!t||!/^[a-z0-9\-\_]{16,}\.[a-z0-9\-\_]{16,}\.[a-z0-9\-\_]{16,}/i.test(t))throw new Error("Invalid token.")
var n=r(t.split("."),2),i=n[0],o=n[1],a=this._decode(o),s=a.exp,u=a.iss
if(this.expiration=1e3*s,this.isExpired)throw new Error("Initialized with an expired token.")
this.teamId=u
var c=this._decode(i).kid
this.keyId=c}return p(e,[{key:"isExpired",get:function(){return this.expiration<Date.now()}},{key:"_decode",value:function(e){return JSON.parse(_(e))}}]),e}(),N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
d(this,e),this.data=t}return p(e,[{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"length",get:function(){return this.keys.length}},{key:"keys",get:function(){return Object.keys(this.data)}},{key:"getItem",value:function(e){return this.data[e]||null}},{key:"setItem",value:function(e,t){this.data[e]=t}},{key:"removeItem",value:function(e){delete this.data[e]}},{key:"clear",value:function(){var e=this
this.keys.forEach((function(t){return e.removeItem(t)}))}},{key:"key",value:function(e){return this.keys[e]||null}}]),e}(),q=3e5,V=function(e,t){return"".concat(t).concat(e)},U=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
d(this,e),this.storage=t.storage||new N,this.prefix=t.prefix||"",this.ttl=t.ttl||q,this.cacheKeyFunction=t.cacheKeyFunction||V}return p(e,[{key:"getItem",value:function(e){var t=this.cacheKeyForPath(e),n=this.storage.getItem(t)
if(null!==n){var r=JSON.parse(n),i=r.x,o=r.d
if(i>Date.now())return o
this.storage.removeItem(t)}}},{key:"setItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.ttl,r=this.cacheKeyForPath(e)
this.storage.setItem(r,JSON.stringify({x:Date.now()+n,d:t}))}},{key:"removeItem",value:function(e){var t=this.cacheKeyForPath(e)
this.storage.removeItem(t)}},{key:"removeItemsMatching",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.cacheKeyForPath(e)
this.removeItemsMatchingCacheKey(n,t)}},{key:"clear",value:function(){this.removeItemsMatchingCacheKey(this.prefix,!1)}},{key:"removeItemsMatchingCacheKey",value:function(e,t){var n=this,r=new RegExp("^".concat(e).concat(t?"$":""));(this.storage instanceof N?this.storage.keys:Object.keys(this.storage)).forEach((function(e){e&&r.test(e)&&n.storage.removeItem(e)}))}},{key:"cacheKeyForPath",value:function(e){return this.cacheKeyFunction(e,this.prefix)}}]),e}(),W=function(e){return new e.constructor(e)},z="undefined"!=typeof Headers
function K(e){var t
if(!e||e.startsWith("http")&&!e.includes("?"))return{}
try{return B(null!==(t=e.split("?")[1])&&void 0!==t?t:e,"&",decodeURIComponent)}catch(e){return{}}}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e}
return"string"!=typeof e?{}:e.split(t).map((function(e){return e.trim().split("=",2)})).reduce((function(e,t){var i=r(t,2),o=i[0],a=i[1]
return""===o&&void 0===a||(e[n(o)]=n(a),void 0===a&&(e[n(o)]=void 0)),e}),{})}function G(e){var t=function(e,t){if(void 0!==t)return z&&t instanceof Headers?t.get(e):t[e]}("cache-control",e)
if(t)return function(e){var t=Number(e)
if(Number.isFinite(t))return t}(B(t,",")["max-age"])}var H,J=function e(t,n){return Object.keys(t).reduce((function(r,i){var o=t[i],a=n?"".concat(n,"[").concat(encodeURIComponent(i),"]"):encodeURIComponent(i),s=function(e){return!!e&&"object"===v(e)&&!Array.isArray(e)}(o)?e(o,a):"".concat(a,"=").concat(encodeURIComponent("".concat(o)))
return"".concat(r).concat(r?"&":"").concat(s)}),"")}
function $(e){return e?J(e):""}!function(e){e.JSON="application/json",e.FORM="application/x-www-form-urlencoded"}(H||(H={}))
var X=function(){function e(t,n){var r
if(d(this,e),this.prefix="",this.method="GET",this.url=t,(n=n||{}).storage&&n.underlyingStorage)throw new Error("only pass storage OR underlyingStorage in sessionOptions to URLSession")
var i=n.underlyingStorage||{}
if(this.storage=n.storage||new N(i),this.networkCache=new U({storage:this.storage,prefix:this.prefix,cacheKeyFunction:this._key.bind(this)}),this.ttl=n.ttl||3e5,this._fetchOptions=Object.assign({},n.fetchOptions),"function"!=typeof n.fetch&&"function"!=typeof fetch)throw new Error("window.fetch is not defined")
this._fetchFunction=null!==(r=n.fetch)&&void 0!==r?r:fetch.bind(window),this.headers=this._fetchOptions.headers||new Headers,delete this._fetchOptions.headers}return p(e,[{key:"clearCacheForRequest",value:function(e,t){"object"===v(e)&&(t=e,e=void 0)
var n=this.constructURL(e,t)
this.networkCache.removeItemsMatching(n)}},{key:"request",value:function(e,t,n){var r
return m(this,void 0,void 0,regeneratorRuntime.mark((function i(){var o,a,s,u,c,l,h,d,f,p,y,m
return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n||"object"!==v(e)||(n=t||{},t=e,e=void 0),n=Object.assign(Object.assign({method:this.method,headers:this.headers,reload:!1},this._fetchOptions),n),o={},"object"===v(n.queryParameters)?(o=n.queryParameters,delete n.queryParameters):"GET"!==n.method&&"DELETE"!==n.method||(o=t),a=this.constructURL(e,o),u=(s=n).method,c=s.reload,l=void 0!==c&&c,h=s.useRawResponse,n.headers=this.buildHeaders(n),delete n.reload,delete n.useRawResponse,"GET"!==u){i.next=14
break}if(l){i.next=14
break}if(!(d=this.getCacheItem(a))){i.next=14
break}return i.abrupt("return",Promise.resolve(d))
case 14:return t&&Object.keys(t).length&&("POST"===u||"PUT"===u)&&(n.body=n.body||t,n.contentType===H.FORM?(n.body=$(n.body),n.headers.set("Content-Type",H.FORM)):(n.body=JSON.stringify(n.body),n.headers.set("Content-Type",H.JSON))),i.next=17,this._fetchFunction(a,n)
case 17:if((f=i.sent).ok){i.next=20
break}return i.abrupt("return",Promise.reject(f))
case 20:return i.prev=20,i.next=23,f.json()
case 23:p=i.sent,i.next=29
break
case 26:i.prev=26,i.t0=i.catch(20),p={}
case 29:if(!p.errors){i.next=31
break}return i.abrupt("return",Promise.reject(p.errors))
case 31:return y=h?p:p.results||p.data||p,"GET"===u&&(m=null!==(r=G(f.headers))&&void 0!==r?r:this.ttl,this.setCacheItem(a,y,m)),i.abrupt("return",y)
case 34:case"end":return i.stop()}}),i,this,[[20,26]])})))}},{key:"buildHeaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.headers,n=e.reload,r=void 0!==n&&n
void 0===t&&(t=this.headers)
var i=W(t)
return r&&i.set("Cache-Control","no-cache"),i}},{key:"constructURL",value:function(e,t){return n=t,function(e,t){var n=$(t)
return""===n?e:e.endsWith("&")||e.endsWith("?")?"".concat(e).concat(n):e.includes("?")?"".concat(e,"&").concat(n):"".concat(e,"?").concat(n)}(function(e,t){return void 0===e||""===e?t||"":void 0===t?e:(e.endsWith("/")&&(e=e.slice(0,-1)),t.startsWith("/")&&(t=t.slice(1)),"".concat(e,"/").concat(t))}(this.url,e),n)
var n}},{key:"getCacheItem",value:function(e){var t=this.networkCache.storage,n="".concat(this.prefix).concat(this.prefix).concat("cache-mut"),r=t.getItem(n)||null,i=this.headers.get("Music-User-Token")||this.headers.get("Media-User-Token")||null
return i!==r&&(this.networkCache.clear(),null===i?t.removeItem(n):t.setItem(n,i)),this.networkCache.getItem(e)}},{key:"setCacheItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.ttl
this.networkCache.setItem(e,t,n)}},{key:"clearNetworkCache",value:function(){this.networkCache.clear()}},{key:"_key",value:function(e,t){var n=function(e){try{var t=r(e.split("?",2),2),n=t[0],o=t[1]
if(void 0===o)return n
var a=o.split("&").map((function(e){return e.split("=",2)})),s=i(Array(a.length).keys())
s.sort((function(e,t){var n=a[e],r=a[t]
return n<r?-1:n>r?1:e-t}))
var u=s.map((function(e){return a[e]})).map((function(e){var t=r(e,2),n=t[0],i=t[1]
return void 0!==i?"".concat(n,"=").concat(i):n})).join("&")
return"".concat(n,"?").concat(u)}catch(t){return e}}(e).toLowerCase().replace(this.url,"")
return"".concat(this.prefix).concat(n.replace(/[^-_0-9a-z]{1,}/g,"."))}}]),e}(),Q=["trace","debug","info","warn","error"],Y=function(e){return"object"===v(e)&&null!==e&&"string"==typeof e.topic},Z=p((function e(){d(this,e)}))
Q.forEach((function(e){Z.prototype[e]=function(){}}))
var ee=new Z,te=function(){return"undefined"==typeof console?ee:console},ne={},re=function(e){var t,n="undefined"==typeof localStorage?void 0:localStorage,r=e.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(function(e,t){return t.toUpperCase()}))
return ne.hasOwnProperty(r)?t=ne[r]:(t={get:function(){return null==n?void 0:n.getItem(e)},json:function(){var t=null==n?void 0:n.getItem(e)
try{return t?JSON.parse(t):void 0}catch(e){return}},setJson:function(t){try{var r=JSON.stringify(t)
null==n||n.setItem(e,r)}catch(e){}},remove:function(){return null==n?void 0:n.removeItem(e)},set:function(t){return null==n?void 0:n.setItem(e,t)}},ne[r]=t),t}
re("mk-debug"),re("mk-debug-topic")
var ie="undefined"==typeof localStorage?void 0:localStorage,oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mk-debug",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q.length
return parseInt(ae(e,t),10)},ae=b((function(e,t){var n,r
return null!==(r=null===(n=null==ie?void 0:ie.getItem)||void 0===n?void 0:n.call(ie,e))&&void 0!==r?r:"".concat(t)})),se=function(e,t){return-1!==ue(oe(t)).indexOf(e)},ue=function(e){return isNaN(e)||e<0?[]:Q.slice(e)},ce=function(e,t){var n=function(){return ae(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mk-debug-topic",arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*")}(t)
return le(n).some((function(t){return t.test(e)}))},le=b((function(e){return e.split(/[\s,]+/).map((function(e){var t=e.replace(/\*/g,".*?")
return new RegExp("^"+t+"$")}))})),he=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
return me.apply(void 0,[Object.assign({level:"trace"},e)].concat(n))},de=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
return me.apply(void 0,[Object.assign({level:"debug"},e)].concat(n))},fe=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
return me.apply(void 0,[Object.assign({level:"info"},e)].concat(n))},pe=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
return me.apply(void 0,[Object.assign({level:"warn"},e)].concat(n))},ve=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
return me.apply(void 0,[Object.assign({level:"error"},e)].concat(n))},ye=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
return me.apply(void 0,[e].concat(n))},me=function(e){var t=e.level,n=e.levelKey,r=e.topic,o=e.topicKey
if(se(t=null!=t?t:"debug",n)&&ce(r,o)){var a=te()
if("function"==typeof a[t]){for(var s=arguments.length,u=new Array(s>1?s-1:0),c=1;c<s;c++)u[c-1]=arguments[c]
var l=u[0],h=u.slice(1)
void 0!==r&&(l="".concat(r,": ").concat(l)),a[t].apply(a,[l].concat(i(h)))}}},ge=function(){function e(t){var n,r,i,o
d(this,e),this._levelFilterKey="mk-debug","string"==typeof t?(this._levelFilterKey=t,this.level=oe(this._levelFilterKey,5)):"object"===v(t)?(this._levelFilterKey=null!==(n=t.levelFilterStorageKey)&&void 0!==n?n:this._levelFilterKey,this._topicFilterKey=null!==(r=t.topicFilterStorageKey)&&void 0!==r?r:this.generateDefaultTopicFilterStorageKey(this._levelFilterKey),this.topic=t.topic,this.level=null!==(i=t.level)&&void 0!==i?i:oe(this._levelFilterKey,5)):this.level=null!=t?t:oe(this._levelFilterKey,5),this._topicFilterKey=null!==(o=this._topicFilterKey)&&void 0!==o?o:this.generateDefaultTopicFilterStorageKey(this._levelFilterKey)}return p(e,[{key:"enabled",get:function(){return this.level<5},set:function(e){this.level=e?1:5}},{key:"debug",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
this.callLogMethod.apply(this,[de,e].concat(n))}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
this.callLogMethod.apply(this,[ve,e].concat(n))}},{key:"log",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
this.callLogMethod.apply(this,[ye,e].concat(n))}},{key:"info",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
this.callLogMethod.apply(this,[fe,e].concat(n))}},{key:"trace",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
this.callLogMethod.apply(this,[he,e].concat(n))}},{key:"warn",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
this.callLogMethod.apply(this,[pe,e].concat(n))}},{key:"callLogMethod",value:function(e,t){for(var n,r,i={levelKey:this._levelFilterKey,topicKey:this._topicFilterKey,topic:this.topic},o=t,a=arguments.length,s=new Array(a>2?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u]
Y(t)&&(i.topic=null!==(n=t.topic)&&void 0!==n?n:i.topic,o=null!==(r=t.message)&&void 0!==r?r:s.shift()),e.apply(void 0,[i,o].concat(s))}},{key:"generateDefaultTopicFilterStorageKey",value:function(e){return"".concat(e,"-topic")}}]),e}()
new ge
var be=new ge
function we(e){var t=void 0!==e.cachingPolicy,n=t&&"cache"in e.cachingPolicy&&!e.cachingPolicy.cache,r=t&&void 0!==e._mjs.expiration&&Date.now()>e._mjs.expiration,i=e._mjs.invalid
return!(n||r||i)}var _e,ke,Se=["browseWebLanding","contentEpisodes","episodeItunesSeasons","favoritesContains","getPostPlayShelf","getShowDetailById","showEpisodeNextepisode","showItunesSeasons","viewShowEpisodes","watchlistContinueWatching"],Oe=["v2/browse/watchNow","v2/browse/movies","v2/browse/tv","v2/browse/kids","v2/browse/sports","v2/browse/person/{personId}","v2/browse/collection/{collectionId}","v2/browse/channel/{brandId}","v2/browse/room/{roomId}","v2/browse/genre/{genreId}","v3/shows/{showId}","v3/movies/{movieId}","v3/episodes/{episodeId}","v3/canvases/{canvasType}/{entityId}"],Ee=["Episode","Movie","Show"],Re=function(e){s(n,e)
var t=c(n)
function n(e){var r
return d(this,n),(r=t.call(this,e))._canvasPathToID={},r._allowPersonalizedCache=!1,r._allowPersonalizedCache=e.allowPersonalizedCache,r}return p(n,[{key:"isCanvas",value:function(e){return Oe.includes(e)}},{key:"updateRecordMetadata",value:function(e,t){var n,r=t.args,i=t.path,o=t.pathTemplate,a=e._mjs.sourcePaths,s=a?a.includes(i)?a:a.concat([i]):[i]
e._mjs.sourcePaths=s,this.isCanvas(o)&&(be.debug("adding id to _browseCanvases",i,e.id),this._canvasPathToID[i]=Object.assign({id:e.id},this._canvasPathToID[i]))
var u=r[0]&&"object"===v(r[0])?r[0]:{}
e._mjs.previousTokens=null!==(n=e._mjs.previousTokens)&&void 0!==n?n:[],e._mjs.previousTokens.push(u.nextToken)}},{key:"getCachedRecord",value:function(e){var t,i,o=e.args,a=e.methodName,s=e.path,u=e.pathTemplate,c=e.queryParams,l=e.skipDataStoreCache
be.debug("uts: ".concat(a," getCachedRecord"),e)
var h=this.isCanvas(u),d="skip"in c
if(!n.isNotCached(a)&&!d){var f=o[0]&&"object"===v(o[0])?o[0].id||o[0].collectionId||o[0].showId||o[0].showOrSeasonId||o[0].personId:o[0]
if(h&&this._canvasPathToID[s]&&(f=this._canvasPathToID[s].id),be.debug("uts: ".concat(a," getCachedRecord - id used to query data store:"),f),f){var p=r(this.query((function(e){return e.id===f})),1)[0]
if(be.debug("uts: ".concat(a," getCachedRecord - query result:"),p),p){if(l)return be.debug("uts: ".concat(a," getCachedRecord - skipDataStoreCache enabled, removing cached record"),p.type,p.id),(null===(t=p._mjs.parents)||void 0===t?void 0:t.length)>0&&"Shelf"===p.type?void(p._mjs.previousTokens=[]):void this.removeCachedRecord(p)
var y=null===(i=p._mjs)||void 0===i?void 0:i.previousTokens,m=c.nextToken
if(n.hasPath(p,s)&&(null==y?void 0:y.includes(m))){if(we(p))return p.nextToken===m&&(p.nextToken=null),p
be.debug("uts: ".concat(a," getCachedRecord - Removing invalid record"),p.type,p.id),this.removeCachedRecord(p)}}}}}},{key:"replaceShelf",value:function(e){this.populateDataRecords(e,this._records,{})}},{key:"removeCachedRecord",value:function(e){var t,n=this;(null===(t=null==e?void 0:e.shelves)||void 0===t?void 0:t.length)>0&&e.shelves.forEach((function(e){n.remove(e.type,e.id)})),this.remove(e.type,e.id)}},{key:"invalidateWithEvent",value:function(e,t){be.debug("uts: invalidateWithEvent",e),this._invalidateCanvasAndShelvesForEvent(e),this._invalidateProductRecords(e,t)}},{key:"_invalidateProductRecords",value:function(e,t){var i=this
t&&k(t).forEach((function(e){var t=r(i.query((function(t){return t.id===e.id})),1)[0]
t&&(Ee.includes(t.type)?(be.debug("uts: filtering sourcePaths for record:",t),n._removePersonalizedPaths(t),t.show&&(be.debug("uts: filtering sourcePaths for show record:",t.show),n._removePersonalizedPaths(t.show))):t._mjs.invalid=!0)}))}},{key:"_invalidateCanvasAndShelvesForEvent",value:function(e){var t=this
Object.values(this._canvasPathToID).forEach((function(r){if(r&&r.id){var i=t.peek("Canvas",r.id)
n._hasInvalidationEvent(i,e)?i._mjs.invalid=!0:i&&i.shelves&&i.shelves.length>0&&i.shelves.forEach((function(t){n._hasInvalidationEvent(t,e)&&(t._mjs.invalid=!0)}))}}))}},{key:"makeRecord",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.args,o=e.path,a=e.response,s=e.isPersonalized,u=e.methodName
if(a){if(r||n.isNotCached(u)||o.endsWith("personalized")&&!this._allowPersonalizedCache)return this.populateDataRecords(a,{})
s&&a.data&&a.data.content&&(a.data.content.cachingPolicy={cache:!0,maxAge:900})
var c={},l=null==i?void 0:i[0]
l&&(l.hasOwnProperty("skip")&&l.skip>0||l.hasOwnProperty("nextToken")&&l.nextToken)&&(c.extendRelationships=!0)
var h=this.save(a,c)
return k(h).forEach((function(n){return t.updateRecordMetadata(n,e)})),h}}}],[{key:"isNotCached",value:function(e){return Se.includes(e)||/search/i.test(e)}},{key:"_hasInvalidationEvent",value:function(e,t){var n,r,i
return null!==(i=null===(r=null===(n=null==e?void 0:e.cachingPolicy)||void 0===n?void 0:n.invalidationEvents)||void 0===r?void 0:r.includes(t))&&void 0!==i&&i}},{key:"_removePersonalizedPaths",value:function(e){var t,n,r=this
e._mjs.sourcePaths=null===(n=null===(t=e._mjs)||void 0===t?void 0:t.sourcePaths)||void 0===n?void 0:n.filter((function(e){return!r.isPersonalizedPath(e)}))}},{key:"hasPath",value:function(e,t){var n,r
return(null!==(r=null===(n=null==e?void 0:e._mjs)||void 0===n?void 0:n.sourcePaths)&&void 0!==r?r:[]).includes(t)}},{key:"isPersonalizedPath",value:function(e){return e.endsWith("personalized")||/v\d\/view\/show\/.+\/(episodes|playables)/.test(e)}}]),n}(F),je=function(){function e(t,n,r){d(this,e),this.methodName=t,this.args=r
var o="object"===v(r[0])?Object.assign({},r[0]):i(r)
this.pathTemplate=n.url.replace(/(?:.+)\/uts\/?/i,"")
var a=function(e,t){var n=e,r=e.match(/{[^}]+}/g)||[],i=[]
return r.forEach((function(e,r){var o=e.replace(/{|}/g,"")
n=n.replace(e,encodeURIComponent(Array.isArray(t)?t[r]:t[o])),i.push(o)})),{formattedPath:n,pathKeys:i}}(this.pathTemplate,o),s=a.formattedPath,u=a.pathKeys
this.path=s,this.pathKeys=u,this.queryParams=Array.isArray(o)?{}:o,this.pathKeys.forEach((function(e){return delete o[e]})),this.queryParams.body&&(this.body=this.queryParams.body,delete this.queryParams.body)
var c=!1
"reload"in this.queryParams&&(c=this.queryParams.reload,delete this.queryParams.reload),"returnRawResponse"in this.queryParams&&(this.returnRawResponse=this.queryParams.returnRawResponse,delete this.queryParams.returnRawResponse),this.skipDataStoreCache=c,this.isPersonalized=Re.isPersonalizedPath(this.path)
var l=e.getRouteMethod(t),h=this.pathTemplate.startsWith("v2")
this.fetchOptions={contentType:"POST"===l&&h?H.FORM:H.JSON,method:l,useRawResponse:!0,reload:c||this.isPersonalized||Re.isNotCached(t)}}return p(e,[{key:"response",get:function(){return this._response},set:function(e){null!==(null==e?void 0:e.data)&&"object"===v(null==e?void 0:e.data)&&(e.data.methodName=this.methodName),this._response=e}}],[{key:"getRouteMethod",value:function(e){return e.startsWith("post")||e.startsWith("add")||"markItemAsWatched"===e?"POST":e.startsWith("remove")||e.startsWith("delete")?"DELETE":"GET"}}]),e}()
function Pe(e){var t={id:e.id,type:e.type||"Shelf",attributes:{},relationships:{}}
return t.attributes=Object.assign({},e),t}function Ae(e){var t,n={id:e.canvas.id,type:e.canvas.type,attributes:Object.assign({},e.canvas),relationships:{}}
e.canvas.shelves&&!(null==(t=e.canvas.shelves)?void 0:t.some((function(e){return void 0===e.id})))&&(n.relationships.shelves={data:e.canvas.shelves.map((function(e){return e.type="Shelf",e}))},delete e.canvas.shelves)
var r=y(e,["canvas"])
return n.attributes=Object.assign({},e.canvas),e.person&&(n.relationships.person={data:e.person},delete e.person),e.genre&&(n.relationships.genre={data:e.genre},delete e.genre),n.attributes=Object.assign(Object.assign({},n.attributes),r),n}function Ie(e){var t,n=null!==(t=e.shelf)&&void 0!==t?t:e
return{id:n.id,type:"Shelf",attributes:Object.assign({},n),relationships:{}}}!function(e){e.show="show"}(_e||(_e={})),function(e){e.bundles="bundles",e.episodes="episodes",e.movies="movies",e.seasons="seasons"}(ke||(ke={}))
var Te=Object.values(_e),Ce=Object.values(ke),Me=[].concat(i(Te),i(Ce))
function xe(e){return Object.keys(e).reduce((function(t,n){return"content"===n?(t.id=e.content.id,t.type=e.content.type,t.attributes=Object.assign(Object.assign({},t.attributes),e[n])):"playables"===n?t.attributes[n]=e[n]:"episodes"!==n||Array.isArray(e[n])?"seasons"!==n||Array.isArray(e[n])?Me.includes(n)?t.relationships[n]={data:e[n]}:t.attributes[n]=e[n]:t.relationships[n]={data:Object.assign({id:"".concat(e.content.id,".seasons"),type:"Collection"},e[n])}:t.relationships[n]={data:Object.assign({id:"episodes.".concat(e.content.id),type:"Episodes"},e[n])},t}),{attributes:{},relationships:{}})}function De(e){if(e.content){var t=e.content.relatedSportingEvents||[]
return delete e.content.relatedSportingEvents,{id:e.content.id,type:e.content.type,attributes:Object.assign({},e.content),relationships:{channels:{data:e.channels||[]},relatedSportingEvents:{data:t}}}}return Pe(e)}function Fe(e){var t=e.items,n=y(e,["items"]),r=e.channels
return{id:"watchlist",type:"Watchlist",attributes:Object.assign({},n),relationships:{items:{data:t},channels:{data:r}}}}function Le(e){var t,n="unknown",r=e.methodName
return delete e.methodName,"watchlistContinueWatching"===r?n="Watchlist":"showItunesSeasons"===r?(e.content={id:"itunesSeasons",type:"itunesSeasons"},n="Product"):"contentEpisodes"===r?(e.content={id:"contentEpisodes",type:"contentEpisodes"},n="Product"):e.type?n=e.type:e.canvas?(e.canvas.type=null!==(t=e.canvas.type)&&void 0!==t?t:"Canvas",n=e.canvas.type):e.content?n="SportingEvent"===e.content.type?e.content.type:"Product":e.showId?(e.content={id:e.showId,type:"Show"},n="Product"):e.shelf&&(n="Collection"),function(e){switch(e){case"Canvas":return Ae
case"Product":return xe
case"SportingEvent":return De
case"Watchlist":return Fe
case"Collection":return Ie
default:return Pe}}(n)(e)}var Ne,qe="2.2146.1",Ve="https://uts-api.itunes.apple.com/uts",Ue="v2/init/config",We="v3/configurations",ze="v2/activity/playables/decorate",Ke="wta",Be="46",Ge="143441",He="143441,33",Je={shows:{method:"GET",url:"https://tv.apple.com/uts/v3/shows/{showId}",requiredParamsType:"Default"},movies:{method:"GET",url:"https://tv.apple.com/uts/v3/movies/{movieId}",requiredParamsType:"Default"},episodes:{method:"GET",url:"https://tv.apple.com/uts/v3/episodes/{episodeId}",requiredParamsType:"Default"}},$e={caller:Ke,sfh:He,v:Be}
!function(e){e.PLAY="PLAY",e.UPNEXT_ADD_REMOVE="UPNEXT_ADD_REMOVE"}(Ne||(Ne={}))
var Xe=function(e){s(n,e)
var t=c(n)
function n(){var e,r,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0
return d(this,n),(e=t.call(this,o,a))._isV3Config=!1,e.fetchOptions={},e.v3={},e.version=qe,s.debug&&(be.enabled=!0,be.level="number"==typeof s.logLevel?s.logLevel:1),s.developerToken&&(e.developerToken=new L(s.developerToken),e.headers.set("Authorization","Bearer ".concat(e.developerToken.token)),e.userToken=s.userToken,e.userToken&&e.headers.set("Media-User-Token",e.userToken)),e._dataStoreEnabled=!!s.dataStoreEnabled,e._dataStoreEnabledNoCache=!!s.dataStoreEnabledNoCache,e._store=new Re({mapping:Le,allowPersonalizedCache:!!(null===(r=s.features)||void 0===r?void 0:r.includes("uts-personalized-cache"))}),e._isV3Config=!!(null===(i=s.features)||void 0===i?void 0:i.includes("uts-config-v3")),e.initializedOptions=Object.assign(Object.assign({},$e),u),e.fetchOptions=e._fetchOptions,e}return p(n,[{key:"config",get:function(){return this._config}},{key:"routes",get:function(){var e,t,n,r,i,o
return null!==(o=null!==(n=null===(t=null===(e=this.config)||void 0===e?void 0:e.endpoints)||void 0===t?void 0:t.serverRoutes)&&void 0!==n?n:null===(i=null===(r=this.config)||void 0===r?void 0:r.applicationProps)||void 0===i?void 0:i.routes)&&void 0!==o?o:{}}},{key:"getRequiredParams",value:function(){var e,t,n,r,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Default"
return null!==(i=null!==(t=null===(e=this.config)||void 0===e?void 0:e.requiredRequestKeyValuePairs)&&void 0!==t?t:null===(r=null===(n=this.config)||void 0===n?void 0:n.applicationProps)||void 0===r?void 0:r.requiredParamsMap[o])&&void 0!==i?i:{}}},{key:"reconfigure",value:function(e){return m(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r
return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return be.debug("uts: reconfigure with options:",e),n=e.userToken,r=y(e,["userToken"]),"userToken"in e&&(this.userToken=n,n?this.headers.set("Media-User-Token",this.userToken):(be.debug("uts: removing MUT header and clearing config"),this.headers.delete("Media-User-Token"),this._config=void 0)),this._dataStoreEnabled&&this._store.clear(),this.clearNetworkCache(),this.initializedOptions=Object.assign(Object.assign({},this.initializedOptions),r),t.abrupt("return",this._updateAPIConfiguration())
case 7:case"end":return t.stop()}}),t,this)})))}},{key:"reconfigureRatings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return m(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.tvr||delete this.initializedOptions.tvr,e.mr||delete this.initializedOptions.mr,t.abrupt("return",this.reconfigure(e))
case 3:case"end":return t.stop()}}),t,this)})))}},{key:"invalidate",value:function(e,t){return m(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this._dataStoreEnabled?this._store.invalidateWithEvent(e,t):this.clearNetworkCache()
case 1:case"end":return n.stop()}}),n,this)})))}},{key:"decorate",value:function(e){return m(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i
return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object.assign({ids:e},this.getRequiredParams()),r=Object.assign(Object.assign({},this.fetchOptions),{useRawResponse:!0}),be.debug("Fetch decorate endpointParams: ".concat(n,", fetchOptions: ").concat(this.fetchOptions,", endpointOptions: ").concat(r)),t.prev=3,t.next=6,this._makeUTSRequest(ze,n,r)
case 6:i=t.sent,t.next=12
break
case 9:t.prev=9,t.t0=t.catch(3),i=void 0
case 12:return t.abrupt("return",i)
case 13:case"end":return t.stop()}}),t,this,[[3,9]])})))}},{key:"getNpPayloadContent",value:function(e,t,n){return{context:{user:{id:t,keyspace:"cid"},userAgent:navigator.userAgent,appleStoreFront:this.initializedOptions.sfh,source:"Client_Device",cadence:"Contract",bundleId:n,millisecondsSinceEvent:0},event:{vodEvent:e}}}},{key:"playActivity",value:function(e,t,n){return m(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,o
return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={headers:{Authorization:"Bearer ".concat(this.developerToken.token),"Media-User-Token":this.userToken},method:"POST",body:JSON.stringify(this.getNpPayloadContent(e,t,n))},r.next=3,fetch("/api/np/play/json",i)
case 3:return o=r.sent,r.abrupt("return",o)
case 5:case"end":return r.stop()}}),r,this)})))}},{key:"_generateServerRoute",value:function(e,t){var n=this
if(t&&t.url&&!t.needsMescal)return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a]
return m(n,void 0,void 0,regeneratorRuntime.mark((function n(){var i,a,s,u,c,l,h,d,f,p,y,m,g,b,w,_,k,S,O
return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=new je(e,t,o),l=c.path,h=c.queryParams,d=c.fetchOptions,f=c.methodName,p=c.body,y=c.returnRawResponse,m=Object.assign(Object.assign({},this.getRequiredParams(t.requiredParamsType)),h),g=m,p&&(g=p,d.queryParameters=m),this._dataStoreEnabled&&!y){n.next=7
break}return n.abrupt("return",this._makeUTSRequest(l,g,d))
case 7:if(!(b=this._dataStoreEnabledNoCache?void 0:this._store.getCachedRecord(c))){n.next=14
break}if("Canvas"!==b.type){n.next=12
break}return n.next=12,this._handleInvalidShelves(b,c)
case 12:return be.debug("uts: ".concat(f," - returning cached record"),b),n.abrupt("return",b)
case 14:return be.debug("uts: ".concat(f," - no record found in cache, making request")),n.next=17,this._makeUTSRequest(l,g,d)
case 17:if(c.response=n.sent,null!==(null===(i=c.response)||void 0===i?void 0:i.data)&&"object"===v(null===(a=c.response)||void 0===a?void 0:a.data)){n.next=20
break}return n.abrupt("return",c.response)
case 20:if(!(w=null===(u=null===(s=c.response)||void 0===s?void 0:s.data)||void 0===u?void 0:u.canvas)){n.next=27
break}if(_=this._dataStoreEnabledNoCache?[]:this._store.query((function(e){return e.id===w.id})),k=r(_,1),!(S=k[0])||Re.hasPath(S,l)){n.next=27
break}return be.debug("uts: Duplicate canvas found"),this._store.updateRecordMetadata(S,c),n.abrupt("return",S)
case 27:return O=this._store.makeRecord(c,this._dataStoreEnabledNoCache),be.debug("uts: ".concat(f," - returning new or updated record"),O),n.abrupt("return",O)
case 30:case"end":return n.stop()}}),n,this)})))}}},{key:"_makeUTSRequest",value:function(e,t,n){return m(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,o,a
return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=Object.assign({},t),o=Object.assign(Object.assign({},this.fetchOptions),n),r.prev=2,e=this.resolvePathVersion(e),r.next=6,this.request(e,i,o)
case 6:if(a=r.sent,!this._needsConfigurationRefresh(a)){r.next=14
break}return this.clearNetworkCache(),r.next=11,this._updateAPIConfiguration()
case 11:return r.next=13,this.request(e,i,o)
case 13:a=r.sent
case 14:return r.abrupt("return",a)
case 17:return r.prev=17,r.t0=r.catch(2),r.abrupt("return",Promise.reject(r.t0))
case 20:case"end":return r.stop()}}),r,this,[[2,17]])})))}},{key:"resolvePathVersion",value:function(e){return this.url.endsWith("v2")?e.replace(/v\d\//,""):e}},{key:"_needsConfigurationRefresh",value:function(e){var t=e.utsk,n=this.getRequiredParams().utsk
return!!t&&t!==n}},{key:"_updateAPIConfiguration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getRequiredParams()
return m(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i
return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return be.debug("UTS: Fetching new config with options",e),n={},r=Object.assign(Object.assign({},this.fetchOptions),{method:"POST",contentType:H.JSON}),(i=Object.assign(Object.assign(Object.assign({},this.initializedOptions),e),{ts:Date.now()})).utsFeatureFlags&&(n.featureFlags=i.utsFeatureFlags,delete i.utsFeatureFlags),r.queryParameters=i,t.next=8,this.request(this.resolvePathVersion(this._isV3Config?We:Ue),n,r)
case 8:this._config=t.sent
case 9:case"end":return t.stop()}}),t,this)})))}},{key:"_handleInvalidShelves",value:function(e,t){return m(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i=this
return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._dataStoreEnabled&&e&&e.shelves&&e.shelves.some(x)){n.next=2
break}return n.abrupt("return")
case 2:return r=function(e){return m(i,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i
return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return be.debug("uts: _handleInvalidShelves - fetching and replacing shelf with id:",e.id),r={},e.url&&(r=K(e.url)),n.next=5,this._makeUTSRequest("v2/browse/collection/".concat(e.id),Object.assign(Object.assign(Object.assign({},this.getRequiredParams()),t.queryParams),r),Object.assign(Object.assign({},t.fetchOptions),{reload:!0}))
case 5:i=n.sent,this._store.replaceShelf(i)
case 7:case"end":return n.stop()}}),n,this)})))},n.next=5,Promise.all(e.shelves.filter((function(e){return!we(e)})).map(r))
case 5:case"end":return n.stop()}}),n,this)})))}}],[{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return m(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i,o,a,s,u,c,l,h,d,f
return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return be.debug("Configuring with options: ",e),n=e.hostname,r=e.baseUrl,i=e.sessionOptions,o=e.debug,a=e.logLevel,s=e.developerToken,u=e.userToken,c=e.dataStoreEnabled,l=e.dataStoreEnabledNoCache,h=e.features,d=y(e,["hostname","baseUrl","sessionOptions","debug","logLevel","developerToken","userToken","dataStoreEnabled","dataStoreEnabledNoCache","features"]),f=new this(n||r,i,{dataStoreEnabled:c,dataStoreEnabledNoCache:l,debug:o,developerToken:s,features:h,logLevel:a,userToken:u},d),t.next=5,f._updateAPIConfiguration(d)
case 5:return Object.keys(f.routes).forEach((function(e){f[e]=f._generateServerRoute(e,f.routes[e])})),Object.keys(Je).forEach((function(e){f.v3[e]=f._generateServerRoute(e,Je[e])})),t.abrupt("return",f)
case 8:case"end":return t.stop()}}),t,this)})))}}]),n}(X)},749:function(e){var t={}
function n(e){return e.types,{visitor:{Program:function(e,n){t=n.opts.enabledFeatures},IfStatement:function(e){var n
i(e.node.test)?(r(e.node.test),o(e,t[e.node.test.arguments[0].value])):"UnaryExpression"===(n=e.node.test).type&&"!"===n.operator&&i(n.argument)&&(r(e.node.test.argument),o(e,!t[e.node.test.argument.arguments[0].value]))},ConditionalExpression:function(e){i(e.node.test)&&(r(e.node.test),t[e.node.test.arguments[0].value]?e.replaceWithMultiple(e.node.consequent):e.replaceWithMultiple(e.node.alternate))},CallExpression:function(e,t){if(i(e.node))throw new Error("Unsafe usage of feature flag found on line ".concat(e.node.loc.start.line,"\n                    Currently babel-plugin-feature-remover only accepts three ways of\n                    marking code to be removed:\n\n                    1. if (feature('FEATURE_NAME')) {}\n                    2. if (!feature('FEATURE_NAME')) {}\n                    3. feature('FEATURE_NAME') ? foo : bar\n\n                    Please rewrite the code to use one of the above forms. For instance:\n\n                        if (feature('FEATURE_NAME') && someOtherCheck) {}\n\n                    can be rewritten as\n\n                       if (feature('FEATURE_NAME')) {\n                           if (someOtherCheck) {\n\n                           }\n                       }\n                    "))}}}}function r(e){if("StringLiteral"!==e.arguments[0].type)throw new Error('Invalid usage of feature flag: "Argument received by `feature` must be a string" on line '+e.loc.start.line)}function i(e){return"CallExpression"===e.type&&"feature"===e.callee.name}function o(e,t){t?e.replaceWithMultiple(e.node.consequent.body):e.node.alternate?"IfStatement"===e.node.alternate.type?e.replaceWith(e.node.alternate):e.replaceWithMultiple(e.node.alternate.body):e.remove()}n.baseDir=function(){return __dirname},n.cacheKey=function(){return"feature-obfuscation"},e.exports=n},387:function(e,t){"use strict"
var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()
function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=/(?:os x|iphone os|ipad; cpu os) (\d+)[_.](\d+)[_.]?(\d+)?/,o=null
new Promise((function(e,t){var n=new Image
n.onerror=function(){return t()},n.onload=function(){return e()},n.src="data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAACyAgCdASoBAAEALmk0mk0iIiIiIgBoSygABc6zbAAA/v56QAAAAA=="})).then((function(){o=!0})).catch((function(){o=!1}))
var a=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?window.navigator.userAgent:arguments[0]
r(this,e),this.ua=t.toLowerCase()}return n(e,[{key:"couldSupportScheme",value:function(e){var t=!1
switch(e){case"apple-music":t=this.isAndroid
break
case"itms":t=this.ismacOS||this.isWindows
break
case"itms-books":t=this.ismacOS||this.isiOS
break
case"itms-itunesu":case"itms-apps":case"itms-podcast":case"itms-messages":case"itms-watch":case"music":t=this.isiOS
break
case"macappstore":t=this.ismacOS
break
case"video":t=this.isAtLeastMojavePlusOne||this.isAtLeastiOSTenTwo}return t}},{key:"isWindows",get:function(){return!this.isMobile&&/windows/.test(this.ua)}},{key:"isWebOS",get:function(){return/web0s|webos/.test(this.ua)}},{key:"isTizen",get:function(){return/tizen/.test(this.ua)}},{key:"isLinux",get:function(){return!this.isMobile&&/linux/.test(this.ua)}},{key:"isAtLeastMojavePlusOne",get:function(){return this.isAtLeastBigSur||this.isMojavePlusOne}},{key:"isAtLeastMojave",get:function(){return this.isAtLeastBigSur||this.isMojavePlusOne||this.isMojave}},{key:"isBigSur",get:function(){return!!this.ismacOS&&(this.isSafari?this.webPSupported:!(!this._isChromeOnBigSur&&!this._isFirefoxOnBigSur)||10===this.macOSMajorVersion&&this.macOSMinorVersion>=16||this.macOSMajorVersion>=11)}},{key:"isAtLeastBigSur",get:function(){return this.isBigSur}},{key:"_isSafariOnBigSur",get:function(){return this.isSafari&&this.isAtLeastBigSur&&14===this.majorVersion}},{key:"_isSafariOnBigSurE",get:function(){return this._isSafariOnBigSur&&1===this.minorVersion}},{key:"_isSafariOnBigSurPreE",get:function(){return this._isSafariOnBigSur&&0===this.minorVersion}},{key:"_isSafariOnBigSurF",get:function(){return this._isSafariOnBigSur&&1===this.minorVersion&&1===this.patchVersion}},{key:"_isFirefoxOnBigSur",get:function(){return this.isFirefox&&10===this.macOSMajorVersion&&this.macOSMinorVersion>=15}},{key:"_isChromeOnBigSur",get:function(){return this.isChrome&&10===this.macOSMajorVersion&&15===this.macOSMinorVersion&&7===this.macOSPatchVersion||this.isChrome&&11===this.macOSMajorVersion}},{key:"webPSupported",get:function(){return"boolean"!=typeof o&&console.warn("You accessed `webPSupported` that has not yet resolved to a boolean. Consider checking this property or a property that relies on this value later."),o||!1}},{key:"isMojavePlusOne",get:function(){return this.ismacOS&&10===this.macOSMajorVersion&&15===this.macOSMinorVersion&&!this.isBigSur}},{key:"isMojave",get:function(){return this.ismacOS&&10===this.macOSMajorVersion&&14===this.macOSMinorVersion}},{key:"isAtLeastiOSTenTwo",get:function(){return!!this.isiOS&&(10===this.iOSMajorVersion&&this.iOSMinorVersion>=2||this.iOSMajorVersion>10)}},{key:"macOSMajorVersion",get:function(){if(this.ismacOS){var e=this.ua.match(i)
if(e&&e[1])return this._isSafariOnBigSur?11:parseInt(e[1],10)}}},{key:"macOSMinorVersion",get:function(){if(this.ismacOS){var e=this.ua.match(i)
if(e&&e[2])return this._isSafariOnBigSurPreE?this.patchVersion-1:this._isSafariOnBigSurE?3:this._isSafariOnBigSurF?4:parseInt(e[2],10)}}},{key:"macOSPatchVersion",get:function(){if(this.ismacOS){var e=this.ua.match(i)
if(e&&e[2]&&e[3])return parseInt(e[3],10)}}},{key:"iOSMajorVersion",get:function(){if(this.isiOS){var e=this.ua.match(i)
if(e&&e[1])return parseInt(e[1],10)}}},{key:"iOSMinorVersion",get:function(){if(this.isiOS){var e=this.ua.match(i)
if(e&&e[2])return parseInt(e[2],10)}}},{key:"ismacOS",get:function(){return!this.isMobile&&/macintosh/.test(this.ua)}},{key:"isChromeOS",get:function(){return!this.isMobile&&/CrOS/.test(this.ua)}},{key:"engineMajorVersion",get:function(){if(this.engineVersion)return parseInt(this.engineVersion[1],10)}},{key:"majorVersion",get:function(){if(this.version)return parseInt(this.version[1],10)}},{key:"minorVersion",get:function(){if(this.version)return parseInt(this.version[2],10)}},{key:"patchVersion",get:function(){if(this.version)return parseInt(this.version[3],10)}},{key:"engineVersion",get:function(){return this.isEdge?this.ua.match(/(?:edge).(\d+)/):this.ua.match(/(?:applewebkit|gecko|trident).(\d+)/)}},{key:"version",get:function(){if(!this.isEdge)return this.ua.match(/(?:chrome|crios|version|firefox|msie|rv).(\d+)\.(\d+)\.?(\d+)?/)}},{key:"isWebKit",get:function(){return!this.isEdgeHTML&&/applewebkit/.test(this.ua)&&!/edge/.test(this.ua)}},{key:"isiOS",get:function(){return this.isMobile&&/iphone|ipad|ipod/.test(this.ua)}},{key:"isEdge",get:function(){return/\sedge\//.test(this.ua)}},{key:"isChrome",get:function(){return!this.isEdge&&/chrome|crios/.test(this.ua)}},{key:"isSafari",get:function(){return!this.isEdge&&!this.isChrome&&/safari/.test(this.ua)}},{key:"isFirefox",get:function(){return!this.isEdge&&!this.isChrome&&!this.isSafari&&/firefox/.test(this.ua)}},{key:"isOpera",get:function(){return!this.isEdge&&!this.isChrome&&!this.isSafari&&/opera|opr/.test(this.ua)}},{key:"isOperaMini",get:function(){return!this.isEdge&&!this.isChrome&&!this.isSafari&&/opera\s*mini/.test(this.ua)}},{key:"isIE",get:function(){return!this.isEdge&&!this.isChrome&&!this.isSafari&&!this.isFirefox&&/trident|msie/.test(this.ua)}},{key:"isMobile",get:function(){return/mobile/.test(this.ua)||this.isOperaMini}},{key:"isAndroid",get:function(){return/android/.test(this.ua)}},{key:"isEdgeHTML",get:function(){return this.isEdge}},{key:"isTrident",get:function(){return!this.isEdgeHTML&&!this.isWebKit&&/trident/.test(this.ua)}},{key:"isGecko",get:function(){return!this.isEdgeHTML&&!this.isWebKit&&!this.isTrident&&/gecko/.test(this.ua)}},{key:"osName",get:function(){return this.isWindows?"Windows":this.isLinux?"Linux":this.ismacOS?"MacOS":this.isChromeOS?"Chrome OS":this.isTizen?"Tizen":this.isTrident?"Trident":this.isAndroid?"Android":this.isiOS?"iOS":this.isWebOS?"WebOS":"unknown"}},{key:"clientName",get:function(){return this.isEdge?"Edge":this.isIE?"IE":this.isChrome?"Chrome":this.isSafari?"Safari":this.isFirefox?"Firefox":this.isOpera?"Opera":this.isOperaMini?"Opera Mini":"unknown"}},{key:"browserName",get:function(){var e="",t=this.clientName
return this.majorVersion&&(e=""+this.majorVersion,this.minorVersion&&this.patchVersion?e=e+"."+this.minorVersion+"."+this.patchVersion:this.minorVersion&&(e=e+"."+this.minorVersion)),""!==t?""!==e?t+" "+e:t:"unknown"}}]),e}()
t.default=a},155:function(e,t,n){"use strict"
var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(433),o={app:["8"],audiobook:["3"],book:["11","13"],"mac-app":["12"],podcast:["2"]},a={audiobook:/\/(audiobook\/|viewAudiobook)/,book:/\/book\//,course:/\/course\//,"mac-app":/\/mac-app\//,story:/\/story\//,developer:/\/developer\//,music:/\/(album|artist|music-video|show|episode)\//,podcast:/\/podcast\//,tv:/\/(episode|movie|movie-collection|show|season|sporting-event|person)\//},s={book:"books.apple.com",podcast:"podcasts.apple.com",music:"music.apple.com",tv:"tv.apple.com"},u={book:"books",podcast:"podcasts"},c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)
var n=(0,i.parseURL)(t),r=n.hostname,o=n.pathname,a=n.protocol,s=n.search
this.hostname=r,this.pathname=o,this.protocol=a,this.query=(0,i.parseSearch)(s),this.url=t}return r(e,null,[{key:"forURL",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.isAndroid||!1,r=t.isMobile||!1,i=t.isAtLeastMojave||!1,o=t.isAtLeastMojavePlusOne||!1,a=t.isAtLeastiOSTenTwo||!1,s=new this(e)
if(!/https?:/.test(s.protocol))return s.protocol
if(r){if((s.isApps||s.isStory||s.isDeveloper)&&!n)return"itms-apps"
if(s.isWatch)return"itms-watch"
if(s.isPodcast)return"itms-podcast"
if(s.isMessages)return"itms-messages"
if(s.isMusic)return n?"apple-music":"music"
if(s.isTV&&a)return"com.apple.tv"}if(o){if(s.isPodcast)return"podcast"
if(s.isAudiobook)return"itms-books"
if(s.isTV)return"video"
if(s.isMusic)return"music"}return s.isBook?"itms-books":s.isCobalt?"itms-itunesu":s.isMacApp||(s.isStory||s.isDeveloper)&&i?"macappstore":"itms"}},{key:"isApple",value:function(e){return e&&null!==e.match(/^(?:itms(?:-.*)?|macappstore|podcast|video|(?:apple-)?music)s?(:|$)/im)}}]),r(e,[{key:"_is",value:function(e){var t="itunes.apple.com"!==this.hostname&&s[e],n=t&&String.prototype.endsWith.call(this.hostname,t),r=this.query,i=r.app,c=r.mt,l=i&&(i===e||i===u[e])
if(t||l)return n||l
var h=o[e]
if(h&&h.includes(c))return!0
var d=a[e]
return!(!d||!d.test(this.pathname))}},{key:"isApps",get:function(){return-1!==o.app.indexOf(this.query.mt)&&!this.isMessages&&!this.isWatch}},{key:"isAudiobook",get:function(){return this._is("audiobook")}},{key:"isBook",get:function(){return this._is("book")&&!this.isAudiobook}},{key:"isCobalt",get:function(){return this._is("course")}},{key:"isMacApp",get:function(){return this._is("mac-app")}},{key:"isStory",get:function(){return this._is("story")}},{key:"isMessages",get:function(){return this._is("messages")}},{key:"isMusic",get:function(){return this._is("music")}},{key:"isPodcast",get:function(){return this._is("podcast")}},{key:"isTV",get:function(){return this._is("tv")}},{key:"isWatch",get:function(){return this._is("watch")}},{key:"isDeveloper",get:function(){return this._is("developer")}}]),e}()
t.default=c},702:function(e,t){"use strict"
t.appendFrame=function(){var e=arguments.length<=0||void 0===arguments[0]?n:arguments[0],t=arguments.length<=1||void 0===arguments[1]?document.body:arguments[1],r=e
return"string"==typeof e&&((r=document.createElement("iframe")).id=e,r.style.display="none"),t.appendChild(r),r},t.removeFrame=function(){var e=arguments.length<=0||void 0===arguments[0]?n:arguments[0],t=arguments.length<=1||void 0===arguments[1]?document.body:arguments[1],r=e
"string"==typeof e&&(r=document.getElementById(e)),r&&t.removeChild(r)}
var n="client-detect-frame"
t.FRAME_ID=n},433:function(e,t){"use strict"
var n=function(e,t){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}
t.parseSearch=function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t={},i=e.match(r)||[]
return i.forEach((function(e){var r=e.split("="),i=n(r,2),o=i[0],a=i[1]
t[o]=a})),t},t.parseURL=function(e){var t=document.createElement("a")
return t.href=e,{hash:t.hash,hostname:t.hostname,pathname:t.pathname,protocol:t.protocol,search:t.search}},t.sanitizeUrlForLaunch=function(e){var t=new URL(e)
return t.host=t.host.replace(/^(?:[^-]+[-.])?([^.]+)\.apple\.com/,"$1.apple.com"),t.port="",t.toString().replace(":0","")}
var r=/([^?&=]+)=?([^&]*)/g},193:function(e,t,n){"use strict"
var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()
t.registerGlobal=function(e){e.ClientDetect=u}
var i=n(387),o=n(155),a=n(900),s=n(433),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"browser",value:function(e){return new i.default(e)}},{key:"couldHaveAppStore",value:function(){var e=arguments.length<=0||void 0===arguments[0]?window.navigator.userAgent:arguments[0]
return new i.default(e).couldSupportScheme("itms-apps")}},{key:"couldHaveBookStore",value:function(){var e=arguments.length<=0||void 0===arguments[0]?window.navigator.userAgent:arguments[0]
return new i.default(e).couldSupportScheme("itms-books")}},{key:"couldHaveiTunes",value:function(){var e=arguments.length<=0||void 0===arguments[0]?window.navigator.userAgent:arguments[0]
return new i.default(e).couldSupportScheme("itms")}},{key:"couldHaveiTunesU",value:function(){var e=arguments.length<=0||void 0===arguments[0]?window.navigator.userAgent:arguments[0]
return new i.default(e).couldSupportScheme("itms-itunesu")}},{key:"couldHaveMacAppStore",value:function(){var e=arguments.length<=0||void 0===arguments[0]?window.navigator.userAgent:arguments[0]
return new i.default(e).couldSupportScheme("macappstore")}},{key:"couldHaveMessages",value:function(){var e=arguments.length<=0||void 0===arguments[0]?window.navigator.userAgent:arguments[0]
return new i.default(e).couldSupportScheme("itms-messages")}},{key:"couldHaveMusic",value:function(){var e=arguments.length<=0||void 0===arguments[0]?window.navigator.userAgent:arguments[0],t=new i.default(e)
return t.couldSupportScheme("music")||t.couldSupportScheme("apple-music")}},{key:"couldHavePodcasts",value:function(){var e=arguments.length<=0||void 0===arguments[0]?window.navigator.userAgent:arguments[0]
return new i.default(e).couldSupportScheme("itms-podcast")}},{key:"couldHaveTV",value:function(){var e=arguments.length<=0||void 0===arguments[0]?window.navigator.userAgent:arguments[0]
return new i.default(e).couldSupportScheme("video")}},{key:"couldHaveWatch",value:function(){var e=arguments.length<=0||void 0===arguments[0]?window.navigator.userAgent:arguments[0]
return new i.default(e).couldSupportScheme("itms-watch")}},{key:"schemeForURL",value:function(e,t){var n=o.default.forURL(e,t),r=t.isAndroid||"com.apple.tv"===n?/^https?/:/^http/
return{scheme:n,href:e.replace(r,n)}}},{key:"launchClient",value:function(t,n){var r=new i.default,o=t,u=void 0
if(/^https?:\/\//.test(t)){var c=e.schemeForURL(t,r)
u=c.scheme,o=c.href}if(o=(0,s.sanitizeUrlForLaunch)(o),"function"!=typeof n)return window.location.href=o
function l(){n(1,r,o)}function h(){n(0,r,o)}return navigator.msLaunchUri?navigator.msLaunchUri(o,l,h):r.isChrome?a.default.chrome(o,l,h):r.isFirefox?a.default.firefox(o,l,h):r.isIE?a.default.ie(o,l,h):r.isiOS?a.default.ios(o,l,h):r.ismacOS&&r.isSafari?a.default.mac(o,l,h):a.default.default(o,(function(){n(-1,r,o)})),{scheme:u,href:o}}}]),e}()
t.ClientDetect=u,t.default=u},216:function(e,t){"use strict"
t.default=function(e){var t=arguments.length<=1||void 0===arguments[1]?Function():arguments[1],n=arguments.length<=2||void 0===arguments[2]?Function():arguments[2]
function r(){window.clearTimeout(i),window.removeEventListener("blur",r),t()}window.addEventListener("blur",r)
var i=window.setTimeout((function(){window.removeEventListener("blur",r),n()}),250)
try{window.location.href=e}catch(e){n()}}},98:function(e,t,n){"use strict"
var r=n(702)
t.default=function(e){var t=arguments.length<=1||void 0===arguments[1]?Function():arguments[1],n=(0,r.appendFrame)()
n.contentWindow.location.href=e,window.setTimeout((function(){(0,r.removeFrame)(n),t()}),250)}},847:function(e,t,n){"use strict"
var r=n(702)
t.default=function(e){var t=arguments.length<=1||void 0===arguments[1]?Function():arguments[1],n=arguments.length<=2||void 0===arguments[2]?Function():arguments[2],i=(0,r.appendFrame)()
try{i.contentWindow.location.href=e,t()}catch(e){n()}finally{(0,r.removeFrame)()}}},846:function(e,t){"use strict"
var n="client-detect-popup"
t.POPUP_ID=n,t.default=function(e){var t=arguments.length<=1||void 0===arguments[1]?Function():arguments[1],r=arguments.length<=2||void 0===arguments[2]?Function():arguments[2],i="about:blank",o=window.open("",n,"height=0,width=0")
o.location.href=e
try{!function(){o.location.href=i,t()
var e=window.setInterval((function(){o.close(),o.closed&&window.clearInterval(e)}),250)}()}catch(e){(o=window.open(i,n)).close(),r()}}},900:function(e,t,n){"use strict"
var r=n(98),i=n(216),o=n(847),a=n(846),s=n(700),u=n(618)
t.default={chrome:i.default,firefox:o.default,ie:a.default,ios:s.default,mac:u.default,default:r.default}},700:function(e,t){"use strict"
t.default=function(e){var t=arguments.length<=1||void 0===arguments[1]?Function():arguments[1],n=arguments.length<=2||void 0===arguments[2]?Function():arguments[2]
try{top.window.location.href=e,t()}catch(e){n()}}},618:function(e,t,n){"use strict"
var r=n(155),i=n(702)
t.default=function(e){var t=arguments.length<=1||void 0===arguments[1]?Function():arguments[1],n=arguments.length<=2||void 0===arguments[2]?Function():arguments[2]
function o(e){var n=arguments.length<=1||void 0===arguments[1]?t:arguments[1]
window.clearTimeout(s),window.removeEventListener("blur",o),(0,i.removeFrame)(a),n()}var a=(0,i.appendFrame)()
if(a.contentWindow.location.href=e,r.default.isApple(e))return t()
window.addEventListener("blur",o)
var s=window.setTimeout((function(){o(null,n)}),50)}},530:function(e){e.exports=function(e){var t=e
e<60&&(t=60)
var n=t/3600,r=Math.floor(n),i=t%3600,o=Math.round(i/60)
return 60===o&&(r+=1,o=0),{hours:r,minutes:o}}},526:function(e){"use strict"
var t="touch"
function n(e,t){this._target=e||document.body,this._attr=t||"data-focus-method",this._focusMethod=this._lastFocusMethod=!1,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onWindowBlur=this._onWindowBlur.bind(this),this._bindEvents()}var r=n.prototype
r._bindEvents=function(){this._target.addEventListener("keydown",this._onKeyDown,!0),this._target.addEventListener("mousedown",this._onMouseDown,!0),this._target.addEventListener("touchstart",this._onTouchStart,!0),this._target.addEventListener("focus",this._onFocus,!0),this._target.addEventListener("blur",this._onBlur,!0),window.addEventListener("blur",this._onWindowBlur)},r._onKeyDown=function(e){this._focusMethod="key"},r._onMouseDown=function(e){this._focusMethod!==t&&(this._focusMethod="mouse")},r._onTouchStart=function(e){this._focusMethod=t},r._onFocus=function(e){this._focusMethod||(this._focusMethod=this._lastFocusMethod),e.target.setAttribute(this._attr,this._focusMethod),this._lastFocusMethod=this._focusMethod,this._focusMethod=!1},r._onBlur=function(e){e.target.removeAttribute(this._attr)},r._onWindowBlur=function(e){this._focusMethod=!1},e.exports=n},8:function(e){"use strict"
var t=Object.prototype.hasOwnProperty,n="~"
function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function")
var s=new i(r,o||e,a),u=n?n+t:t
return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[]
if(0===this._eventsCount)return i
for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r)
return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t]
if(!r)return[]
if(r.fn)return[r.fn]
for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn
return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t]
return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e
if(!this._events[s])return!1
var u,c,l=this._events[s],h=arguments.length
if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0
case 2:return l.fn.call(l.context,t),!0
case 3:return l.fn.call(l.context,t,r),!0
case 4:return l.fn.call(l.context,t,r,i),!0
case 5:return l.fn.call(l.context,t,r,i,o),!0
case 6:return l.fn.call(l.context,t,r,i,o,a),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c]
l.fn.apply(l.context,u)}else{var d,f=l.length
for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context)
break
case 2:l[c].fn.call(l[c].context,t)
break
case 3:l[c].fn.call(l[c].context,t,r)
break
case 4:l[c].fn.call(l[c].context,t,r,i)
break
default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d]
l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e
if(!this._events[o])return this
if(!t)return a(this,o),this
var s=this._events[o]
if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o)
else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u])
c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t
return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},94:function(e){"use strict"
function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var n=Array.isArray,r=Object.keys,i=Object.prototype.hasOwnProperty
e.exports=function e(o,a){if(o===a)return!0
if(o&&a&&"object"==t(o)&&"object"==t(a)){var s,u,c,l=n(o),h=n(a)
if(l&&h){if((u=o.length)!=a.length)return!1
for(s=u;0!=s--;)if(!e(o[s],a[s]))return!1
return!0}if(l!=h)return!1
var d=o instanceof Date,f=a instanceof Date
if(d!=f)return!1
if(d&&f)return o.getTime()==a.getTime()
var p=o instanceof RegExp,v=a instanceof RegExp
if(p!=v)return!1
if(p&&v)return o.toString()==a.toString()
var y=r(o)
if((u=y.length)!==r(a).length)return!1
for(s=u;0!=s--;)if(!i.call(a,y[s]))return!1
for(s=u;0!=s--;)if(!e(o[c=y[s]],a[c]))return!1
return!0}return o!=o&&a!=a}},990:function(e,t,n){"use strict"
function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.r(t)
var i,o=function(){function e(){this.registry=new WeakMap}return e.prototype.elementExists=function(e){return this.registry.has(e)},e.prototype.getElement=function(e){return this.registry.get(e)},e.prototype.addElement=function(e,t){e&&this.registry.set(e,t||{})},e.prototype.removeElement=function(e){this.registry.delete(e)},e.prototype.destroyRegistry=function(){this.registry=new WeakMap},e}(),a=function(){}
!function(e){e.enter="enter",e.exit="exit"}(i||(i={}))
var s,u=function(){function e(){this.registry=new o}return e.prototype.addCallback=function(e,t,n){var r,o,a
e===i.enter?((r={})[i.enter]=n,a=r):((o={})[i.exit]=n,a=o),this.registry.addElement(t,Object.assign({},this.registry.getElement(t),a))},e.prototype.dispatchCallback=function(e,t,n){if(e===i.enter){var r=this.registry.getElement(t).enter;(void 0===r?a:r)(n)}else{var o=this.registry.getElement(t)
o&&o.exit&&o.exit(n)}},e}(),c=(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},s(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])
return e},l.apply(this,arguments)},h=function(e){function t(){var t=e.call(this)||this
return t.elementRegistry=new o,t}return c(t,e),t.prototype.observe=function(e,t){void 0===t&&(t={}),e&&(this.elementRegistry.addElement(e,l({},t)),this.setupObserver(e,l({},t)))},t.prototype.unobserve=function(e,t){var n=this.findMatchingRootEntry(t)
n&&n.intersectionObserver.unobserve(e)},t.prototype.addEnterCallback=function(e,t){this.addCallback(i.enter,e,t)},t.prototype.addExitCallback=function(e,t){this.addCallback(i.exit,e,t)},t.prototype.dispatchEnterCallback=function(e,t){this.dispatchCallback(i.enter,e,t)},t.prototype.dispatchExitCallback=function(e,t){this.dispatchCallback(i.exit,e,t)},t.prototype.destroy=function(){this.elementRegistry.destroyRegistry()},t.prototype.setupOnIntersection=function(e){var t=this
return function(n){return t.onIntersection(e,n)}},t.prototype.setupObserver=function(e,t){var n,r,i=t.root,o=void 0===i?window:i,a=this.findRootFromRegistry(o)
if(a&&(r=this.determineMatchingElements(t,a)),r){var s=r.elements,u=r.intersectionObserver
s.push(e),u&&u.observe(e)}else{var c={elements:[e],intersectionObserver:u=this.newObserver(e,t),options:t},l=this.stringifyOptions(t)
a?a[l]=c:this.elementRegistry.addElement(o,((n={})[l]=c,n))}},t.prototype.newObserver=function(e,t){var n=t.root,r=t.rootMargin,i=t.threshold,o=new IntersectionObserver(this.setupOnIntersection(t).bind(this),{root:n,rootMargin:r,threshold:i})
return o.observe(e),o},t.prototype.onIntersection=function(e,t){var n=this
t.forEach((function(t){var r=t.isIntersecting,i=t.intersectionRatio,o=e.threshold||0
Array.isArray(o)&&(o=o[o.length-1])
var a=n.findMatchingRootEntry(e)
r||i>o?a&&a.elements.some((function(e){return!(!e||e!==t.target||(n.dispatchEnterCallback(e,t),0))})):a&&a.elements.some((function(e){return!(!e||e!==t.target||(n.dispatchExitCallback(e,t),0))}))}))},t.prototype.findRootFromRegistry=function(e){if(this.elementRegistry)return this.elementRegistry.getElement(e)},t.prototype.findMatchingRootEntry=function(e){var t=e.root,n=void 0===t?window:t,r=this.findRootFromRegistry(n)
if(r)return r[this.stringifyOptions(e)]},t.prototype.determineMatchingElements=function(e,t){var n=this,r=Object.keys(t).filter((function(r){var i=t[r].options
return n.areOptionsSame(e,i)}))[0]
return t[r]},t.prototype.areOptionsSame=function(e,t){if(e===t)return!0
var n=Object.prototype.toString.call(e),i=Object.prototype.toString.call(t)
if(n!==i)return!1
if("[object Object]"!==n&&"[object Object]"!==i)return e===t
if(e&&t&&"object"===r(e)&&"object"===r(t))for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&!1===this.areOptionsSame(e[o],t[o]))return!1
return!0},t.prototype.stringifyOptions=function(e){var t=e.root
return JSON.stringify(e,(function(e,n){if("root"===e&&t){var r=Array.prototype.slice.call(t.classList).reduce((function(e,t){return e+t}),"")
return t.id+"-"+r}return n}))},t}(u)
t.default=h},494:function(e,t,n){"use strict"
var r
n.r(t)
var i=function(){function e(){this.pool=[],this.flush()}return e.prototype.flush=function(){var e=this
r=window.requestAnimationFrame((function(){var t=e.pool
e.reset(),t.forEach((function(e){e[Object.keys(e)[0]]()})),e.flush()}))},e.prototype.add=function(e,t){var n
return this.pool.push(((n={})[e]=t,n)),t},e.prototype.remove=function(e){this.pool=this.pool.filter((function(t){return!t[e]}))},e.prototype.reset=function(){this.pool=[]},e.prototype.stop=function(){window.cancelAnimationFrame(r)},e}()
t.default=i},276:function(e,t,n){"use strict"
n.r(t),n.d(t,{getCLS:function(){return f},getFCP:function(){return g},getFID:function(){return E},getLCP:function(){return R},getTTFB:function(){return j}})
var r,i,o,a,s=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},u=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return
var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}))
return n.observe({type:e,buffered:!0}),n}}catch(e){}},c=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))}
addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},l=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},h="function"==typeof WeakSet?new WeakSet:new Set,d=function(e,t,n){var r
return function(){t.value>=0&&(n||h.has(t)||"hidden"===document.visibilityState)&&(t.delta=t.value-(r||0),(t.delta||void 0===r)&&(r=t.value,e(t)))}},f=function(e,t){var n,r=s("CLS",0),i=function(e){e.hadRecentInput||(r.value+=e.value,r.entries.push(e),n())},o=u("layout-shift",i)
o&&(n=d(e,r,t),c((function(){o.takeRecords().map(i),n()})),l((function(){r=s("CLS",0),n=d(e,r,t)})))},p=-1,v=function(){return"hidden"===document.visibilityState?0:1/0},y=function(){c((function(e){var t=e.timeStamp
p=t}),!0)},m=function(){return p<0&&(p=v(),y(),l((function(){setTimeout((function(){p=v(),y()}),0)}))),{get timeStamp(){return p}}},g=function(e,t){var n,r=m(),i=s("FCP"),o=function(e){"first-contentful-paint"===e.name&&(c&&c.disconnect(),e.startTime<r.timeStamp&&(i.value=e.startTime,i.entries.push(e),h.add(i),n()))},a=performance.getEntriesByName("first-contentful-paint")[0],c=a?null:u("paint",o);(a||c)&&(n=d(e,i,t),a&&o(a),l((function(r){i=s("FCP"),n=d(e,i,t),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,h.add(i),n()}))}))})))},b={passive:!0,capture:!0},w=new Date,_=function(e,t){r||(r=t,i=e,o=new Date,O(removeEventListener),k())},k=function(){if(i>=0&&i<o-w){var e={entryType:"first-input",name:r.type,target:r.target,cancelable:r.cancelable,startTime:r.timeStamp,processingStart:r.timeStamp+i}
a.forEach((function(t){t(e)})),a=[]}},S=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp
"pointerdown"==e.type?function(e,t){var n=function(){_(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,b),removeEventListener("pointercancel",r,b)}
addEventListener("pointerup",n,b),addEventListener("pointercancel",r,b)}(t,e):_(t,e)}},O=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,S,b)}))},E=function(e,t){var n,o=m(),f=s("FID"),p=function(e){e.startTime<o.timeStamp&&(f.value=e.processingStart-e.startTime,f.entries.push(e),h.add(f),n())},v=u("first-input",p)
n=d(e,f,t),v&&c((function(){v.takeRecords().map(p),v.disconnect()}),!0),v&&l((function(){var o
f=s("FID"),n=d(e,f,t),a=[],i=-1,r=null,O(addEventListener),o=p,a.push(o),k()}))},R=function(e,t){var n,r=m(),i=s("LCP"),o=function(e){var t=e.startTime
t<r.timeStamp&&(i.value=t,i.entries.push(e)),n()},a=u("largest-contentful-paint",o)
if(a){n=d(e,i,t)
var f=function(){h.has(i)||(a.takeRecords().map(o),a.disconnect(),h.add(i),n())};["keydown","click"].forEach((function(e){addEventListener(e,f,{once:!0,capture:!0})})),c(f,!0),l((function(r){i=s("LCP"),n=d(e,i,t),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,h.add(i),n()}))}))}))}},j=function(e){var t,n=s("TTFB")
t=function(){try{var t=performance.getEntriesByType("navigation")[0]||function(){var e=performance.timing,t={entryType:"navigation",startTime:0}
for(var n in e)"navigationStart"!==n&&"toJSON"!==n&&(t[n]=Math.max(e[n]-e.navigationStart,0))
return t}()
if(n.value=n.delta=t.responseStart,n.value<0)return
n.entries=[t],e(n)}catch(e){}},"complete"===document.readyState?setTimeout(t,0):addEventListener("pageshow",t)}}}])
